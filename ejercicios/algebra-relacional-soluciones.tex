\documentclass[a4paper]{article}

\usepackage{hyperref}
\usepackage[spanish, activeacute]{babel}
\usepackage[utf8]{inputenc}
\usepackage[a4paper, margin=3.5cm]{geometry}
\usepackage{lmodern,textcomp}
\usepackage{graphicx}
\usepackage{url}
\usepackage{fancyhdr}
\usepackage{scrextend}
\usepackage{mathtools}
\usepackage{xcolor}
\usepackage{amssymb,amsmath}

\usepackage[
    type={CC},
    modifier={by-nc-sa},
    version={3.0},
]{doclicense}

\renewcommand{\headrulewidth}{0.6pt}
\renewcommand{\footrulewidth}{0.6pt}

\pagestyle{fancy}
\setlength\headheight{50pt}
\lhead{\includegraphics[height=1.5cm]{logos/upm_logo}}
\chead{Bases de Datos\\\vspace{.5em} Soluciones a ejercicios de álgebra relacional\\\vspace{-.1em}}
\rhead{\includegraphics[height=1.5cm]{logos/etsisi_logo}}
\lfoot{\textbf{Tema 3:} Modelo relacional}
\cfoot{}
\rfoot{\thepage}

\parskip 1.1ex % paragraph spacing

\begin{document}
\section{Editoriales}

Solución:

\begin{enumerate}
    \item $\Pi_{Nombre} \left( PAPELERIA \bowtie ELP \bowtie \sigma_{Ciudad='Madrid'} \left( EDITORIALES \right) \right)$
    \item $\Pi_{E\#} \left( \sigma_{A\tilde{n}o=1978} \left( LIBRO \right) \bowtie \sigma_{P\#='P1'} \left( ELP \right) \right) \cap \Pi_{E\#} \left( \sigma_{A\tilde{n}o=1978} \left( LIBRO \right) \bowtie \sigma_{P\#='P3'} \left( ELP \right) \right)$
    \item $\Pi_{P\#} \left( \sigma_{E\#='E1'} \left( ELP \right) \right) - \Pi_{P\#} \left( \sigma_{E\# \neq 'E1'} \left( ELP \right) \right)$
    \item $\Pi_{L\#,P\#} \left( ELP \right) \div \Pi_{P\#} \left( \sigma_{Ciudad \neq 'Madrid'} \left( PAPELERIAS \right) \right)$
\end{enumerate}

\section{Programas}

Solución:

\begin{enumerate}
    \item $\Pi_{U\#, P\#} \left( USOS \right) \div \Pi_{\#} \left( \sigma_{Distribuidor='D1'} \left( PROGRAMAS \right) \right)$
    \item $\Pi_{P\#} \left( \sigma_{U\#='U5'} \left( USOS \right)\right) - \Pi_{P\#} \left( \sigma_{U\#\neq'U5'} \left( USOS \right)\right)$
    \item $\Pi_{Distribuidor} \left( \sigma_{P\#='P5'} \left( Programas \right) \right) \cap \Pi_{Distribuidor} \left( \sigma_{P\#='P8'} \left( Programas \right) \right)$
    \item $\Pi_{Modelo} \left( \sigma_{Edad > 30} \left( USUARIOS \right) \bowtie \sigma_{tiempo > 3} \left( USOS \right) \bowtie ORDENADORES \right)$
\end{enumerate}

\section{Videoteca}

Solución:

\begin{enumerate}
    \item $\Pi_{Pelicula} \left( \sigma_{Aficionado='Jose Perez'} \left( GUSTA \right) \right)$
    \item $\Pi_{Videoclub} \left( VIDEOTECA \bowtie \sigma_{Aficionado='Jose Perez'} \left( GUSTA \right) \right)$
    \item $\Pi_{Aficionado} \left( SOCIO \bowtie VIDEOTECA \bowtie GUSTA \right)$
    \item $\left( \Pi_{Aficionado} \left( GUSTA \right) \cup \Pi_{Aficionado} \left( SOCIO \right) \right) - \Pi_{Aficionado} \left( SOCIO \bowtie VIDEOTECA \bowtie GUSTA \right)$
\end{enumerate}

\section{Maquinaria}

Solución:

\begin{enumerate}
    \item $\Pi_{T\#,M\#} \left( PARTES \right) \div \Pi_{M\#} \left( \sigma_{Tipo=1} \left( MAQUINAS \right) \right)$
    \item $\Pi_{F\#} \left( \sigma_{M\#='M1'} \left( PARTES \right) \right) \cap \Pi_{F\#} \left( \sigma_{M\#='M3'} \left( PARTES \right) \right)$
    \item $\Pi_{M\#} \left( MAQUINAS \right) - \Pi_{M\#} \left( PARTES \right)$
    \item $\Pi_{Nombre} \left( FINCAS \bowtie \left( \sigma_{tiempo>5} \left( PARTES \right) \bowtie \sigma_{PrecioHora>25} \left( MAQUINAS \right) \right) \right)$
\end{enumerate}

\section{Prácticas}

Solución:

\begin{enumerate}
    \item $\Pi_{Nombre} \left( ALUMNOS \bowtie \left( \Pi_{A\#,P\#} \left( \sigma_{Nota>5} \left( ENTREGA \right) \right) \div \Pi_{P\#} \left( \sigma_{Curso=3} \left( PRACTICAS \right) \right) \right) \right)$
    \item $\Pi_{Nombre} \left( ALUMNOS \bowtie \left( \Pi_{A\#,P\#} \left( ENTREGA \right) \div \Pi_{P\#} \left( \sigma_{Curso=3} \left( PRACTICAS \right) \right)\right) \right)$
    \item $\Pi_{A\#} \left( \sigma_{Curso=2} \left( ENTREGA \bowtie PRACTICAS \right) \right) \cap \Pi_{A\#} \left( \sigma_{Curso=3} \left( ENTREGA \bowtie PRACTICAS \right) \right)$
    \item $\Pi_{A\#} \left( \sigma_{Curso=2} \left( ENTREGA \bowtie PRACTICAS \right) \right) - \Pi_{A\#} \left( \sigma_{Curso \neq 2} \left( ENTREGA \bowtie PRACTICAS \right) \right)$
    \item $\Pi_{A\#} \left( \sigma_{Grupo='BD-11'} \left( ALUMNOS \right) \bowtie \left( \sigma_{Curso=2} \left( PRACTICAS \right) \bowtie ENTREGA \right) \right)$
    \item $\Pi_{Nombre} \left( ALUMNOS \bowtie \left( \Pi_{A\#} \left( \sigma_{Nota \geq 5} \left( ENTREGA \right) \right) - \Pi_{A\#} \left( \sigma_{Nota<5} \left( ENTREGA \right) \right) \right) \right)$
\end{enumerate}

\section{Ciclismo}

Solución:

\begin{enumerate}
    \item $\Pi_{C\#} \left( CLASIFICACION \right) - \Pi_{C\#} \left( CLASIFICACION \bowtie \sigma_{Duracion>15} \left( COMPETICIONES \right) \right)$
    \item $\Pi_{C\#} (CICLISTAS \bowtie \sigma_{Pais=Espa\tilde{n}a} (EQUIPOS) \bowtie (\Pi_{C\#,M\#} (CLASIFICACION) \div \Pi_{M\#} (\sigma_{Pais='Espa\tilde{n}a'} (COMPETICIONES))))$
    \item $\Pi_{C\#} (\sigma_{Duracion<15} (COMPETICIONES) \bowtie \sigma_{Puesto=1} (CLASIFICACION)) \cap$ \\
    $\Pi_{C\#} (\sigma_{Duracion<15} (COMPETICIONES \bowtie \sigma_{Puesto=2} (CLASIFICACION))$
\end{enumerate}

\section{Infracciones de tráfico}

Solución:

\begin{enumerate}
    \item $\Pi_{Nombre} \left( CONDUCTOR \bowtie \left( \Pi_{C\#,I\#} \left( DENUNCIA \right) \div \Pi_{I\#} \left( \sigma_{Importe<600} \left( INFRACCION \right) \right) \right) \right)$
    \item $\Pi_{A\#} (\sigma_{Descripcion='Estacionamiento'} (DENUNCIA \bowtie INFRACCION)) -$ \\
    $\Pi_{A\#} (\sigma_{Descripcion \neq 'Estacionamiento'} (DENUNCIA \bowtie INFRACCION))$
    \item $\Pi_{C\#} \left( DENUNCIA \right) - \Pi_{C\#} \left( \sigma_{Pagada='No'} \left( DENUNCIA \right) \right)$
\end{enumerate}

\vspace{1em}
\hrule
\doclicenseThis

\end{document}
