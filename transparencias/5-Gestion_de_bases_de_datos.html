<!DOCTYPE html><html lang="en-US"><head><title>Gestión de bases de datos</title><meta property="og:title" content="Gestión de bases de datos"><meta name="description" content="Aspectos avanzados de la gestión de bases de datos, centrando la atención en transacciones, procedimientos almacenados, funciones, cursores, triggers, índices y gestión de usuarios, elementos cruciales para el mantenimiento, optimización y seguridad de las bases de datos. E.T.S.I. Sistemas Informáticos (UPM)
"><meta property="og:description" content="Aspectos avanzados de la gestión de bases de datos, centrando la atención en transacciones, procedimientos almacenados, funciones, cursores, triggers, índices y gestión de usuarios, elementos cruciales para el mantenimiento, optimización y seguridad de las bases de datos. E.T.S.I. Sistemas Informáticos (UPM)
"><meta name="keywords" content="Bases de datos,Transacciones,Procedimientos almacenados,Funciones,Cursores,Triggers,Índices,Gestión de usuarios"><meta charset="UTF-8"><meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0"><meta name="apple-mobile-web-app-capable" content="yes"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta property="og:type" content="website"><meta name="twitter:card" content="summary"><style>@media screen{body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button{-webkit-tap-highlight-color:transparent;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:0;color:inherit;cursor:pointer;font-size:inherit;opacity:.8;outline:none;padding:0;transition:opacity .2s linear}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:disabled,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:disabled,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:disabled,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button:disabled{cursor:not-allowed;opacity:.15!important}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:hover,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:hover,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:hover,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button:hover{opacity:1}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:active,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:active,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:hover:active,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button:hover:active{opacity:.6}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:not(:disabled),body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:not(:disabled),body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:hover:not(:disabled),body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button:hover:not(:disabled){transition:none}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev],body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button.bespoke-marp-presenter-info-page-prev{background:transparent url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSI1IiBkPSJNNjggOTAgMjggNTBsNDAtNDAiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button.bespoke-marp-presenter-info-page-next{background:transparent url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSI1IiBkPSJtMzIgOTAgNDAtNDAtNDAtNDAiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen]{background:transparent url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48ZGVmcz48c3R5bGU+LmF7ZmlsbDpub25lO3N0cm9rZTojZmZmO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6NXB4fTwvc3R5bGU+PC9kZWZzPjxyZWN0IGNsYXNzPSJhIiB4PSIxMCIgeT0iMjAiIHdpZHRoPSI4MCIgaGVpZ2h0PSI2MCIgcng9IjUuNjciLz48cGF0aCBjbGFzcz0iYSIgZD0iTTQwIDcwSDIwVjUwbTIwIDBMMjAgNzBtNDAtNDBoMjB2MjBtLTIwIDAgMjAtMjAiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button.exit[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button.exit[data-bespoke-marp-osc=fullscreen]{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48ZGVmcz48c3R5bGU+LmF7ZmlsbDpub25lO3N0cm9rZTojZmZmO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6NXB4fTwvc3R5bGU+PC9kZWZzPjxyZWN0IGNsYXNzPSJhIiB4PSIxMCIgeT0iMjAiIHdpZHRoPSI4MCIgaGVpZ2h0PSI2MCIgcng9IjUuNjciLz48cGF0aCBjbGFzcz0iYSIgZD0iTTIwIDUwaDIwdjIwbS0yMCAwIDIwLTIwbTQwIDBINjBWMzBtMjAgMEw2MCA1MCIvPjwvc3ZnPg==")}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter]{background:transparent url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBkPSJNODcuOCA0Ny41Qzg5IDUwIDg3LjcgNTIgODUgNTJIMzVhOC43IDguNyAwIDAgMS03LjItNC41bC0xNS42LTMxQzExIDE0IDEyLjIgMTIgMTUgMTJoNTBhOC44IDguOCAwIDAgMSA3LjIgNC41ek02MCA1MnYzNm0tMTAgMGgyME00NSA0MmgyMCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZmZmIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iNSIvPjwvc3ZnPg==") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button.bespoke-marp-presenter-note-bigger{background:transparent url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBkPSJNMTIgNTBoODBNNTIgOTBWMTAiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjUiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button.bespoke-marp-presenter-note-smaller{background:transparent url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBkPSJNMTIgNTBoODAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjUiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}}.bespoke-marp-note,.bespoke-marp-osc,.bespoke-progress-parent{display:none;transition:none}@media screen{body,html{height:100%;margin:0}body{background:#000;overflow:hidden}svg.bespoke-marp-slide{content-visibility:hidden;opacity:0;pointer-events:none;z-index:-1}svg.bespoke-marp-slide.bespoke-marp-active{content-visibility:visible;opacity:1;pointer-events:auto;z-index:0}svg.bespoke-marp-slide.bespoke-marp-active.bespoke-marp-active-ready *{-webkit-animation-name:__bespoke_marp__!important;animation-name:__bespoke_marp__!important}@supports not (content-visibility:hidden){svg.bespoke-marp-slide[data-bespoke-marp-load=hideable]{display:none}svg.bespoke-marp-slide[data-bespoke-marp-load=hideable].bespoke-marp-active{display:block}}[data-bespoke-marp-fragment=inactive]{visibility:hidden}body[data-bespoke-view=""] .bespoke-marp-parent,body[data-bespoke-view=next] .bespoke-marp-parent{bottom:0;left:0;position:absolute;right:0;top:0}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc{background:rgba(0,0,0,.65);border-radius:7px;bottom:50px;color:#fff;contain:paint;display:block;font-family:Helvetica,Arial,sans-serif;font-size:16px;left:50%;line-height:0;opacity:1;padding:12px;position:absolute;touch-action:manipulation;transform:translateX(-50%);transition:opacity .2s linear;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;will-change:transform;z-index:1}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>*,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>*{margin-left:6px}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>:first-child,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>:first-child{margin-left:0}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>span,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>span{opacity:.8}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>span[data-bespoke-marp-osc=page],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>span[data-bespoke-marp-osc=page]{display:inline-block;min-width:140px;text-align:center}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter],body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev]{height:32px;line-height:32px;width:32px}body[data-bespoke-view=""] .bespoke-marp-parent.bespoke-marp-inactive,body[data-bespoke-view=next] .bespoke-marp-parent.bespoke-marp-inactive{cursor:none}body[data-bespoke-view=""] .bespoke-marp-parent.bespoke-marp-inactive>.bespoke-marp-osc,body[data-bespoke-view=next] .bespoke-marp-parent.bespoke-marp-inactive>.bespoke-marp-osc{opacity:0;pointer-events:none}body[data-bespoke-view=""] svg.bespoke-marp-slide,body[data-bespoke-view=next] svg.bespoke-marp-slide{height:100%;left:0;position:absolute;top:0;width:100%}body[data-bespoke-view=""] .bespoke-progress-parent{background:#222;display:flex;height:5px;width:100%}body[data-bespoke-view=""] .bespoke-progress-parent+.bespoke-marp-parent{top:5px}body[data-bespoke-view=""] .bespoke-progress-parent .bespoke-progress-bar{background:#0288d1;flex:0 0 0;transition:flex-basis .2s cubic-bezier(0,1,1,1)}body[data-bespoke-view=next]{background:transparent}body[data-bespoke-view=presenter]{background:#161616}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container{display:grid;font-family:Helvetica,Arial,sans-serif;grid-template:"current dragbar next" minmax(140px,1fr) "current dragbar note" 2fr "info    dragbar note" 3em;grid-template-columns:minmax(3px,var(--bespoke-marp-presenter-split-ratio,66%)) 0 minmax(3px,1fr);height:100%;left:0;position:absolute;top:0;width:100%}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-parent{grid-area:current;overflow:hidden;position:relative}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-parent svg.bespoke-marp-slide{height:calc(100% - 40px);left:20px;pointer-events:none;position:absolute;top:20px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:calc(100% - 40px)}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-parent svg.bespoke-marp-slide.bespoke-marp-active{filter:drop-shadow(0 3px 10px rgba(0,0,0,.5))}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-dragbar-container{background:#0288d1;cursor:col-resize;grid-area:dragbar;margin-left:-3px;opacity:0;position:relative;transition:opacity .4s linear .1s;width:6px;z-index:10}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-dragbar-container:hover{opacity:1}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-dragbar-container.active{opacity:1;transition-delay:0s}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-next-container{background:#222;cursor:pointer;display:none;grid-area:next;overflow:hidden;position:relative}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-next-container.active{display:block}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-next-container iframe.bespoke-marp-presenter-next{background:transparent;border:0;display:block;filter:drop-shadow(0 3px 10px rgba(0,0,0,.5));height:calc(100% - 40px);left:20px;pointer-events:none;position:absolute;top:20px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:calc(100% - 40px)}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container{background:#222;color:#eee;grid-area:note;position:relative;z-index:1}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button{height:1.5em;line-height:1.5em;width:1.5em}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-presenter-note-wrapper{bottom:0;display:block;left:0;position:absolute;right:0;top:0}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-presenter-note-buttons{background:rgba(0,0,0,.65);border-radius:4px;bottom:0;display:flex;gap:4px;margin:12px;opacity:0;padding:6px;pointer-events:none;position:absolute;right:0;transition:opacity .2s linear}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-presenter-note-buttons:focus-within,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-presenter-note-wrapper:focus-within+.bespoke-marp-presenter-note-buttons,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container:hover .bespoke-marp-presenter-note-buttons{opacity:1;pointer-events:auto}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note{word-wrap:break-word;box-sizing:border-box;font-size:calc(1.1em*var(--bespoke-marp-note-font-scale, 1));height:calc(100% - 40px);margin:20px;overflow:auto;padding-right:3px;scrollbar-color:hsla(0,0%,93%,.5) transparent;scrollbar-width:thin;white-space:pre-wrap;width:calc(100% - 40px)}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note::-webkit-scrollbar{width:6px}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note::-webkit-scrollbar-track{background:transparent}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note::-webkit-scrollbar-thumb{background:hsla(0,0%,93%,.5);border-radius:6px}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note:empty{pointer-events:none}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note.active{display:block}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note p:first-child{margin-top:0}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note p:last-child{margin-bottom:0}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container{align-items:center;box-sizing:border-box;color:#eee;display:flex;flex-wrap:nowrap;grid-area:info;justify-content:center;overflow:hidden;padding:0 10px}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-page,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-time,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-timer{box-sizing:border-box;display:block;padding:0 10px;white-space:nowrap;width:100%}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button{height:1.5em;line-height:1.5em;width:1.5em}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-page{order:2;text-align:center}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-page .bespoke-marp-presenter-info-page-text{display:inline-block;min-width:120px;text-align:center}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-time{color:#999;order:1;text-align:left}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-timer{color:#999;order:3;text-align:right}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-timer:hover{cursor:pointer}}@media print{.bespoke-marp-presenter-info-container,.bespoke-marp-presenter-next-container,.bespoke-marp-presenter-note-container{display:none}}</style><style>div#p>svg>foreignObject>section{width:1280px;height:720px;box-sizing:border-box;overflow:hidden;position:relative;scroll-snap-align:center center}div#p>svg>foreignObject>section:after{bottom:0;content:attr(data-marpit-pagination);padding:inherit;pointer-events:none;position:absolute;right:0}div#p>svg>foreignObject>section:not([data-marpit-pagination]):after{display:none}/* Normalization */div#p>svg>foreignObject>section h1{font-size:2em;margin:0.67em 0}div#p>svg>foreignObject>section video::-webkit-media-controls{will-change:transform}@page{size:1280px 720px;margin:0}@media print{body,html{background-color:#fff;margin:0;page-break-inside:avoid;break-inside:avoid-page}div#p>svg>foreignObject>section{page-break-before:always;break-before:page}div#p>svg>foreignObject>section,div#p>svg>foreignObject>section *{-webkit-print-color-adjust:exact!important;animation-delay:0s!important;animation-duration:0s!important;color-adjust:exact!important;transition:none!important}div#p>svg[data-marpit-svg]{display:block;height:100vh;width:100vw}}
/*!
 * Marp default theme.
 *
 * @theme default
 * @author Yuki Hattori
 *
 * @auto-scaling true
 * @size 16:9 1280px 720px
 * @size 4:3 960px 720px
 */div#p>svg>foreignObject>section{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;word-wrap:break-word;background-color:#fff;color:#24292f;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:16px;line-height:1.5;margin:0}div#p>svg>foreignObject>section{--marpit-root-font-size:16px}div#p>svg>foreignObject>section h1:hover .anchor .octicon-link:before,div#p>svg>foreignObject>section h2:hover .anchor .octicon-link:before,div#p>svg>foreignObject>section h3:hover .anchor .octicon-link:before,div#p>svg>foreignObject>section h4:hover .anchor .octicon-link:before,div#p>svg>foreignObject>section h5:hover .anchor .octicon-link:before,div#p>svg>foreignObject>section h6:hover .anchor .octicon-link:before{background-color:currentColor;content:" ";display:inline-block;height:16px;-webkit-mask-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 0 0 1.06 1.06l1.25-1.25a2 2 0 1 1 2.83 2.83l-2.5 2.5a2 2 0 0 1-2.83 0 .75.75 0 0 0-1.06 1.06 3.5 3.5 0 0 0 4.95 0l2.5-2.5a3.5 3.5 0 0 0-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 0 1 0-2.83l2.5-2.5a2 2 0 0 1 2.83 0 .75.75 0 0 0 1.06-1.06 3.5 3.5 0 0 0-4.95 0l-2.5 2.5a3.5 3.5 0 0 0 4.95 4.95l1.25-1.25a.75.75 0 0 0-1.06-1.06l-1.25 1.25a2 2 0 0 1-2.83 0z"/></svg>');mask-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 0 0 1.06 1.06l1.25-1.25a2 2 0 1 1 2.83 2.83l-2.5 2.5a2 2 0 0 1-2.83 0 .75.75 0 0 0-1.06 1.06 3.5 3.5 0 0 0 4.95 0l2.5-2.5a3.5 3.5 0 0 0-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 0 1 0-2.83l2.5-2.5a2 2 0 0 1 2.83 0 .75.75 0 0 0 1.06-1.06 3.5 3.5 0 0 0-4.95 0l-2.5 2.5a3.5 3.5 0 0 0 4.95 4.95l1.25-1.25a.75.75 0 0 0-1.06-1.06l-1.25 1.25a2 2 0 0 1-2.83 0z"/></svg>');width:16px}div#p>svg>foreignObject>section details,div#p>svg>foreignObject>section figcaption,div#p>svg>foreignObject>section figure{display:block}div#p>svg>foreignObject>section summary{display:list-item}div#p>svg>foreignObject>section [hidden]{display:none!important}div#p>svg>foreignObject>section a{background-color:transparent;color:#0969da;text-decoration:none}div#p>svg>foreignObject>section a:active,div#p>svg>foreignObject>section a:hover{outline-width:0}div#p>svg>foreignObject>section abbr[title]{border-bottom:none;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}div#p>svg>foreignObject>section b,div#p>svg>foreignObject>section strong{font-weight:600}div#p>svg>foreignObject>section dfn{font-style:italic}div#p>svg>foreignObject>section h1{border-bottom:1px solid #d8dee4;font-size:2em;font-weight:600;margin:.67em 0;padding-bottom:.3em}div#p>svg>foreignObject>section mark{background-color:#fff8c5;color:#24292f}div#p>svg>foreignObject>section small{font-size:90%}div#p>svg>foreignObject>section sub,div#p>svg>foreignObject>section sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}div#p>svg>foreignObject>section sub{bottom:-.25em}div#p>svg>foreignObject>section sup{top:-.5em}div#p>svg>foreignObject>section img{background-color:#fff;border-style:none;box-sizing:content-box;max-width:100%}div#p>svg>foreignObject>section code,div#p>svg>foreignObject>section kbd,div#p>svg>foreignObject>section pre,div#p>svg>foreignObject>section samp{font-family:monospace,monospace;font-size:1em}div#p>svg>foreignObject>section figure{margin:1em 40px}div#p>svg>foreignObject>section hr{background:transparent;background-color:#d0d7de;border:0;box-sizing:content-box;height:.25em;margin:24px 0;overflow:hidden;padding:0}div#p>svg>foreignObject>section input{font:inherit;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible}div#p>svg>foreignObject>section [type=button],div#p>svg>foreignObject>section [type=reset],div#p>svg>foreignObject>section [type=submit]{-webkit-appearance:button}div#p>svg>foreignObject>section [type=button]::-moz-focus-inner,div#p>svg>foreignObject>section [type=reset]::-moz-focus-inner,div#p>svg>foreignObject>section [type=submit]::-moz-focus-inner{border-style:none;padding:0}div#p>svg>foreignObject>section [type=button]:-moz-focusring,div#p>svg>foreignObject>section [type=reset]:-moz-focusring,div#p>svg>foreignObject>section [type=submit]:-moz-focusring{outline:1px dotted ButtonText}div#p>svg>foreignObject>section [type=checkbox],div#p>svg>foreignObject>section [type=radio]{box-sizing:border-box;padding:0}div#p>svg>foreignObject>section [type=number]::-webkit-inner-spin-button,div#p>svg>foreignObject>section [type=number]::-webkit-outer-spin-button{height:auto}div#p>svg>foreignObject>section [type=search]{-webkit-appearance:textfield;outline-offset:-2px}div#p>svg>foreignObject>section [type=search]::-webkit-search-cancel-button,div#p>svg>foreignObject>section [type=search]::-webkit-search-decoration{-webkit-appearance:none}div#p>svg>foreignObject>section ::-webkit-input-placeholder{color:inherit;opacity:.54}div#p>svg>foreignObject>section ::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}div#p>svg>foreignObject>section a:hover{text-decoration:underline}div#p>svg>foreignObject>section hr:after,div#p>svg>foreignObject>section hr:before{content:"";display:table}div#p>svg>foreignObject>section hr:after{clear:both}div#p>svg>foreignObject>section table{border-collapse:collapse;border-spacing:0;display:block;max-width:100%;overflow:auto;width:-webkit-max-content;width:-moz-max-content;width:max-content}div#p>svg>foreignObject>section td,div#p>svg>foreignObject>section th{padding:0}div#p>svg>foreignObject>section details summary{cursor:pointer}div#p>svg>foreignObject>section details:not([open])>:not(summary){display:none!important}div#p>svg>foreignObject>section kbd{background-color:#f6f8fa;border:1px solid rgba(175,184,193,.2);border-radius:6px;box-shadow:inset 0 -1px 0 rgba(175,184,193,.2);color:#24292f;display:inline-block;font:11px ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;line-height:10px;padding:3px 5px;vertical-align:middle}div#p>svg>foreignObject>section h1,div#p>svg>foreignObject>section h2,div#p>svg>foreignObject>section h3,div#p>svg>foreignObject>section h4,div#p>svg>foreignObject>section h5,div#p>svg>foreignObject>section h6{font-weight:600;line-height:1.25;margin-bottom:16px;margin-top:24px}div#p>svg>foreignObject>section h2{border-bottom:1px solid #d8dee4;font-size:1.5em;font-weight:600;padding-bottom:.3em}div#p>svg>foreignObject>section h3{font-size:1.25em;font-weight:600}div#p>svg>foreignObject>section h4{font-size:1em;font-weight:600}div#p>svg>foreignObject>section h5{font-size:.875em;font-weight:600}div#p>svg>foreignObject>section h6{color:#57606a;font-size:.85em;font-weight:600}div#p>svg>foreignObject>section p{margin-bottom:10px;margin-top:0}div#p>svg>foreignObject>section blockquote{border-left:.25em solid #d0d7de;color:#57606a;margin:0;padding:0 1em}div#p>svg>foreignObject>section ol,div#p>svg>foreignObject>section ul{margin-bottom:0;margin-top:0;padding-left:2em}div#p>svg>foreignObject>section ol ol,div#p>svg>foreignObject>section ul ol{list-style-type:lower-roman}div#p>svg>foreignObject>section ol ol ol,div#p>svg>foreignObject>section ol ul ol,div#p>svg>foreignObject>section ul ol ol,div#p>svg>foreignObject>section ul ul ol{list-style-type:lower-alpha}div#p>svg>foreignObject>section dd{margin-left:0}div#p>svg>foreignObject>section code,div#p>svg>foreignObject>section pre,div#p>svg>foreignObject>section tt{font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;font-size:12px}div#p>svg>foreignObject>section pre{word-wrap:normal;margin-bottom:0;margin-top:0}div#p>svg>foreignObject>section .octicon{fill:currentColor;display:inline-block;overflow:visible!important;vertical-align:text-bottom}div#p>svg>foreignObject>section ::-moz-placeholder{color:#6e7781;opacity:1}div#p>svg>foreignObject>section :-ms-input-placeholder{color:#6e7781;opacity:1}div#p>svg>foreignObject>section ::placeholder{color:#6e7781;opacity:1}div#p>svg>foreignObject>section input::-webkit-inner-spin-button,div#p>svg>foreignObject>section input::-webkit-outer-spin-button{-webkit-appearance:none;appearance:none;margin:0}div#p>svg>foreignObject>section .pl-c{color:#6e7781}div#p>svg>foreignObject>section .pl-c1,div#p>svg>foreignObject>section .pl-s .pl-v{color:#0550ae}div#p>svg>foreignObject>section .pl-e,div#p>svg>foreignObject>section .pl-en{color:#8250df}div#p>svg>foreignObject>section .pl-s .pl-s1,div#p>svg>foreignObject>section .pl-smi{color:#24292f}div#p>svg>foreignObject>section .pl-ent{color:#116329}div#p>svg>foreignObject>section .pl-k{color:#cf222e}div#p>svg>foreignObject>section .pl-pds,div#p>svg>foreignObject>section .pl-s,div#p>svg>foreignObject>section .pl-s .pl-pse .pl-s1,div#p>svg>foreignObject>section .pl-sr,div#p>svg>foreignObject>section .pl-sr .pl-cce,div#p>svg>foreignObject>section .pl-sr .pl-sra,div#p>svg>foreignObject>section .pl-sr .pl-sre{color:#0a3069}div#p>svg>foreignObject>section .pl-smw,div#p>svg>foreignObject>section .pl-v{color:#953800}div#p>svg>foreignObject>section .pl-bu{color:#82071e}div#p>svg>foreignObject>section .pl-ii{background-color:#82071e;color:#f6f8fa}div#p>svg>foreignObject>section .pl-c2{background-color:#cf222e;color:#f6f8fa}div#p>svg>foreignObject>section .pl-sr .pl-cce{color:#116329;font-weight:700}div#p>svg>foreignObject>section .pl-ml{color:#3b2300}div#p>svg>foreignObject>section .pl-mh,div#p>svg>foreignObject>section .pl-mh .pl-en,div#p>svg>foreignObject>section .pl-ms{color:#0550ae;font-weight:700}div#p>svg>foreignObject>section .pl-mi{color:#24292f;font-style:italic}div#p>svg>foreignObject>section .pl-mb{color:#24292f;font-weight:700}div#p>svg>foreignObject>section .pl-md{background-color:#ffebe9;color:#82071e}div#p>svg>foreignObject>section .pl-mi1{background-color:#dafbe1;color:#116329}div#p>svg>foreignObject>section .pl-mc{background-color:#ffd8b5;color:#953800}div#p>svg>foreignObject>section .pl-mi2{background-color:#0550ae;color:#eaeef2}div#p>svg>foreignObject>section .pl-mdr{color:#8250df;font-weight:700}div#p>svg>foreignObject>section .pl-ba{color:#57606a}div#p>svg>foreignObject>section .pl-sg{color:#8c959f}div#p>svg>foreignObject>section .pl-corl{color:#0a3069;text-decoration:underline}div#p>svg>foreignObject>section [data-catalyst]{display:block}div#p>svg>foreignObject>section g-emoji{font-family:Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-size:1em;font-style:normal!important;font-weight:400;line-height:1;vertical-align:-.075em}div#p>svg>foreignObject>section g-emoji img{height:1em;width:1em}div#p>svg>foreignObject>section:after,div#p>svg>foreignObject>section:before{
  /* content:""; */display:table}div#p>svg>foreignObject>section:after{clear:both}div#p>svg>foreignObject>section>:first-child{margin-top:0!important}div#p>svg>foreignObject>section>:last-child{margin-bottom:0!important}div#p>svg>foreignObject>section a:not([href]){color:inherit;text-decoration:none}div#p>svg>foreignObject>section .absent{color:#cf222e}div#p>svg>foreignObject>section .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px}div#p>svg>foreignObject>section .anchor:focus{outline:none}div#p>svg>foreignObject>section blockquote,div#p>svg>foreignObject>section details,div#p>svg>foreignObject>section dl,div#p>svg>foreignObject>section ol,div#p>svg>foreignObject>section p,div#p>svg>foreignObject>section pre,div#p>svg>foreignObject>section table,div#p>svg>foreignObject>section ul{margin-bottom:16px;margin-top:0}div#p>svg>foreignObject>section blockquote>:first-child{margin-top:0}div#p>svg>foreignObject>section blockquote>:last-child{margin-bottom:0}div#p>svg>foreignObject>section sup>a:before{content:"["}div#p>svg>foreignObject>section sup>a:after{content:"]"}div#p>svg>foreignObject>section h1 .octicon-link,div#p>svg>foreignObject>section h2 .octicon-link,div#p>svg>foreignObject>section h3 .octicon-link,div#p>svg>foreignObject>section h4 .octicon-link,div#p>svg>foreignObject>section h5 .octicon-link,div#p>svg>foreignObject>section h6 .octicon-link{color:#24292f;vertical-align:middle;visibility:hidden}div#p>svg>foreignObject>section h1:hover .anchor,div#p>svg>foreignObject>section h2:hover .anchor,div#p>svg>foreignObject>section h3:hover .anchor,div#p>svg>foreignObject>section h4:hover .anchor,div#p>svg>foreignObject>section h5:hover .anchor,div#p>svg>foreignObject>section h6:hover .anchor{text-decoration:none}div#p>svg>foreignObject>section h1:hover .anchor .octicon-link,div#p>svg>foreignObject>section h2:hover .anchor .octicon-link,div#p>svg>foreignObject>section h3:hover .anchor .octicon-link,div#p>svg>foreignObject>section h4:hover .anchor .octicon-link,div#p>svg>foreignObject>section h5:hover .anchor .octicon-link,div#p>svg>foreignObject>section h6:hover .anchor .octicon-link{visibility:visible}div#p>svg>foreignObject>section h1 code,div#p>svg>foreignObject>section h1 tt,div#p>svg>foreignObject>section h2 code,div#p>svg>foreignObject>section h2 tt,div#p>svg>foreignObject>section h3 code,div#p>svg>foreignObject>section h3 tt,div#p>svg>foreignObject>section h4 code,div#p>svg>foreignObject>section h4 tt,div#p>svg>foreignObject>section h5 code,div#p>svg>foreignObject>section h5 tt,div#p>svg>foreignObject>section h6 code,div#p>svg>foreignObject>section h6 tt{font-size:inherit;padding:0 .2em}div#p>svg>foreignObject>section ol.no-list,div#p>svg>foreignObject>section ul.no-list{list-style-type:none;padding:0}div#p>svg>foreignObject>section ol[type="1"]{list-style-type:decimal}div#p>svg>foreignObject>section ol[type=a]{list-style-type:lower-alpha}div#p>svg>foreignObject>section ol[type=i]{list-style-type:lower-roman}div#p>svg>foreignObject>section div>ol:not([type]){list-style-type:decimal}div#p>svg>foreignObject>section ol ol,div#p>svg>foreignObject>section ol ul,div#p>svg>foreignObject>section ul ol,div#p>svg>foreignObject>section ul ul{margin-bottom:0;margin-top:0}div#p>svg>foreignObject>section li>p{margin-top:16px}div#p>svg>foreignObject>section li+li{margin-top:.25em}div#p>svg>foreignObject>section dl{padding:0}div#p>svg>foreignObject>section dl dt{font-size:1em;font-style:italic;font-weight:600;margin-top:16px;padding:0}div#p>svg>foreignObject>section dl dd{margin-bottom:16px;padding:0 16px}div#p>svg>foreignObject>section table th{font-weight:600}div#p>svg>foreignObject>section table td,div#p>svg>foreignObject>section table th{border:1px solid #d0d7de;padding:6px 13px}div#p>svg>foreignObject>section table tr{background-color:#fff;border-top:1px solid #d8dee4}div#p>svg>foreignObject>section table tr:nth-child(2n){background-color:#f6f8fa}div#p>svg>foreignObject>section table img{background-color:transparent}div#p>svg>foreignObject>section img[align=right]{padding-left:20px}div#p>svg>foreignObject>section img[align=left]{padding-right:20px}div#p>svg>foreignObject>section .emoji{background-color:transparent;max-width:none;vertical-align:text-top}div#p>svg>foreignObject>section span.frame,div#p>svg>foreignObject>section span.frame>span{display:block;overflow:hidden}div#p>svg>foreignObject>section span.frame>span{border:1px solid #d0d7de;float:left;margin:13px 0 0;padding:7px;width:auto}div#p>svg>foreignObject>section span.frame span img{display:block;float:left}div#p>svg>foreignObject>section span.frame span span{clear:both;color:#24292f;display:block;padding:5px 0 0}div#p>svg>foreignObject>section span.align-center{clear:both;display:block;overflow:hidden}div#p>svg>foreignObject>section span.align-center>span{display:block;margin:13px auto 0;overflow:hidden;text-align:center}div#p>svg>foreignObject>section span.align-center span img{margin:0 auto;text-align:center}div#p>svg>foreignObject>section span.align-right{clear:both;display:block;overflow:hidden}div#p>svg>foreignObject>section span.align-right>span{display:block;margin:13px 0 0;overflow:hidden;text-align:right}div#p>svg>foreignObject>section span.align-right span img{margin:0;text-align:right}div#p>svg>foreignObject>section span.float-left{display:block;float:left;margin-right:13px;overflow:hidden}div#p>svg>foreignObject>section span.float-left span{margin:13px 0 0}div#p>svg>foreignObject>section span.float-right{display:block;float:right;margin-left:13px;overflow:hidden}div#p>svg>foreignObject>section span.float-right>span{display:block;margin:13px auto 0;overflow:hidden;text-align:right}div#p>svg>foreignObject>section code,div#p>svg>foreignObject>section tt{background-color:rgba(175,184,193,.2);border-radius:6px;font-size:85%;margin:0;padding:.2em .4em}div#p>svg>foreignObject>section code br,div#p>svg>foreignObject>section tt br{display:none}div#p>svg>foreignObject>section del code{text-decoration:inherit}div#p>svg>foreignObject>section pre code{font-size:100%}div#p>svg>foreignObject>section pre>code{background:transparent;border:0;margin:0;padding:0;white-space:pre;word-break:normal}div#p>svg>foreignObject>section .highlight{margin-bottom:16px}div#p>svg>foreignObject>section .highlight pre{margin-bottom:0;word-break:normal}div#p>svg>foreignObject>section pre{background-color:#f6f8fa;border-radius:6px;font-size:85%;line-height:1.45;overflow:auto;padding:16px}div#p>svg>foreignObject>section pre code,div#p>svg>foreignObject>section pre tt{word-wrap:normal;background-color:transparent;border:0;display:inline;line-height:inherit;margin:0;max-width:auto;overflow:visible;padding:0}div#p>svg>foreignObject>section .csv-data td,div#p>svg>foreignObject>section .csv-data th{font-size:12px;line-height:1;overflow:hidden;padding:5px;text-align:left;white-space:nowrap}div#p>svg>foreignObject>section .csv-data .blob-num{background:#fff;border:0;padding:10px 8px 9px;text-align:right}div#p>svg>foreignObject>section .csv-data tr{border-top:0}div#p>svg>foreignObject>section .csv-data th{background:#f6f8fa;border-top:0;font-weight:600}div#p>svg>foreignObject>section .footnotes{border-top:1px solid #d0d7de;color:#57606a;font-size:12px}div#p>svg>foreignObject>section div#p>svg>foreignObject>section section.footnotes{--marpit-root-font-size:12px}div#p>svg>foreignObject>section .footnotes ol{padding-left:16px}div#p>svg>foreignObject>section .footnotes li{position:relative}div#p>svg>foreignObject>section .footnotes li:target:before{border:2px solid #0969da;border-radius:6px;bottom:-8px;content:"";left:-24px;pointer-events:none;position:absolute;right:-8px;top:-8px}div#p>svg>foreignObject>section .footnotes li:target{color:#24292f}div#p>svg>foreignObject>section .footnotes .data-footnote-backref g-emoji{font-family:monospace}div#p>svg>foreignObject>section .task-list-item{list-style-type:none}div#p>svg>foreignObject>section .task-list-item label{font-weight:400}div#p>svg>foreignObject>section .task-list-item.enabled label{cursor:pointer}div#p>svg>foreignObject>section .task-list-item+.task-list-item{margin-top:3px}div#p>svg>foreignObject>section .task-list-item .handle{display:none}div#p>svg>foreignObject>section .task-list-item-checkbox{margin:0 .2em .25em -1.6em;vertical-align:middle}div#p>svg>foreignObject>section .contains-task-list:dir(rtl) .task-list-item-checkbox{margin:0 -1.6em .25em .2em}div#p>svg>foreignObject>section ::-webkit-calendar-picker-indicator{filter:invert(50%)}div#p>svg>foreignObject>section .hljs{background:#fff;color:#333;display:block;overflow-x:auto;padding:.5em}div#p>svg>foreignObject>section .hljs-comment,div#p>svg>foreignObject>section .hljs-meta{color:#969896}div#p>svg>foreignObject>section .hljs-emphasis,div#p>svg>foreignObject>section .hljs-quote,div#p>svg>foreignObject>section .hljs-strong,div#p>svg>foreignObject>section .hljs-template-variable,div#p>svg>foreignObject>section .hljs-variable{color:#df5000}div#p>svg>foreignObject>section .hljs-keyword,div#p>svg>foreignObject>section .hljs-selector-tag,div#p>svg>foreignObject>section .hljs-type{color:#d73a49}div#p>svg>foreignObject>section .hljs-attribute,div#p>svg>foreignObject>section .hljs-bullet,div#p>svg>foreignObject>section .hljs-literal,div#p>svg>foreignObject>section .hljs-symbol{color:#0086b3}div#p>svg>foreignObject>section .hljs-name,div#p>svg>foreignObject>section .hljs-section{color:#63a35c}div#p>svg>foreignObject>section .hljs-tag{color:#333}div#p>svg>foreignObject>section .hljs-attr,div#p>svg>foreignObject>section .hljs-selector-attr,div#p>svg>foreignObject>section .hljs-selector-class,div#p>svg>foreignObject>section .hljs-selector-id,div#p>svg>foreignObject>section .hljs-selector-pseudo,div#p>svg>foreignObject>section .hljs-title{color:#6f42c1}div#p>svg>foreignObject>section .hljs-addition{background-color:#eaffea;color:#55a532}div#p>svg>foreignObject>section .hljs-deletion{background-color:#ffecec;color:#bd2c00}div#p>svg>foreignObject>section .hljs-link{text-decoration:underline}div#p>svg>foreignObject>section .hljs-number{color:#005cc5}div#p>svg>foreignObject>section .hljs-string{color:#032f62}div#p>svg>foreignObject>section svg[data-marp-fitting=svg]{max-height:563px}div#p>svg>foreignObject>section h1{color:#246;font-size:1.6em}div#p>svg>foreignObject>section h1,div#p>svg>foreignObject>section h2{border-bottom:none}div#p>svg>foreignObject>section h2{font-size:1.3em}div#p>svg>foreignObject>section h3{font-size:1.1em}div#p>svg>foreignObject>section h4{font-size:1.05em}div#p>svg>foreignObject>section h5{font-size:1em}div#p>svg>foreignObject>section h6{font-size:.9em}div#p>svg>foreignObject>section h1 strong,div#p>svg>foreignObject>section h2 strong,div#p>svg>foreignObject>section h3 strong,div#p>svg>foreignObject>section h4 strong,div#p>svg>foreignObject>section h5 strong,div#p>svg>foreignObject>section h6 strong{color:#48c;font-weight:inherit}div#p>svg>foreignObject>section hr{height:0;padding-top:.25em}div#p>svg>foreignObject>section pre{border:1px solid #999;line-height:1.15;overflow:visible}div#p>svg>foreignObject>section pre code svg[data-marp-fitting=svg]{max-height:529px}div#p>svg>foreignObject>section footer,div#p>svg>foreignObject>section header{color:hsla(0,0%,40%,.75);font-size:18px;left:30px;margin:0;position:absolute}div#p>svg>foreignObject>section header{top:21px}div#p>svg>foreignObject>section footer{bottom:21px}div#p>svg>foreignObject>section{align-items:stretch;background:#fff;display:flex;flex-flow:column nowrap;font-size:29px;height:720px;justify-content:center;padding:78.5px;width:1280px}div#p>svg>foreignObject>section{--marpit-root-font-size:29px}div#p>svg>foreignObject>section>:last-child,div#p>svg>foreignObject>section[data-footer]>:nth-last-child(2){margin-bottom:0}div#p>svg>foreignObject>section>:first-child,div#p>svg>foreignObject>section>header:first-child+*{margin-top:0}div#p>svg>foreignObject>section:after{bottom:21px;color:#777;font-size:24px;padding:0;position:absolute;right:30px}div#p>svg>foreignObject>section:after{--marpit-root-font-size:24px}div#p>svg>foreignObject>section.invert{background-color:#222;color:#e6eaf0}div#p>svg>foreignObject>section.invert:after{color:#999}div#p>svg>foreignObject>section.invert img{background-color:transparent}div#p>svg>foreignObject>section.invert a{color:#50b3ff}div#p>svg>foreignObject>section.invert h1{color:#a3c5e7}div#p>svg>foreignObject>section.invert h2,div#p>svg>foreignObject>section.invert h3,div#p>svg>foreignObject>section.invert h4,div#p>svg>foreignObject>section.invert h5{color:#ebeff5}div#p>svg>foreignObject>section.invert blockquote,div#p>svg>foreignObject>section.invert h6{border-color:#3d3f43;color:#939699}div#p>svg>foreignObject>section.invert h1 strong,div#p>svg>foreignObject>section.invert h2 strong,div#p>svg>foreignObject>section.invert h3 strong,div#p>svg>foreignObject>section.invert h4 strong,div#p>svg>foreignObject>section.invert h5 strong,div#p>svg>foreignObject>section.invert h6 strong{color:#7bf}div#p>svg>foreignObject>section.invert hr{background-color:#3d3f43}div#p>svg>foreignObject>section.invert footer,div#p>svg>foreignObject>section.invert header{color:hsla(0,0%,60%,.75)}div#p>svg>foreignObject>section.invert code,div#p>svg>foreignObject>section.invert kbd{background-color:#111}div#p>svg>foreignObject>section.invert kbd{border-color:#666;box-shadow:inset 0 -1px 0 #555;color:#e6eaf0}div#p>svg>foreignObject>section.invert table tr{background-color:#12181d;border-color:#60657b}div#p>svg>foreignObject>section.invert table tr:nth-child(2n){background-color:#1b2024}div#p>svg>foreignObject>section.invert table td,div#p>svg>foreignObject>section.invert table th{border-color:#5b5e61}div#p>svg>foreignObject>section.invert pre{background-color:#0a0e12;border-color:#777}div#p>svg>foreignObject>section.invert pre code{background-color:transparent}div#p>svg>foreignObject>section[data-color] h1,div#p>svg>foreignObject>section[data-color] h2,div#p>svg>foreignObject>section[data-color] h3,div#p>svg>foreignObject>section[data-color] h4,div#p>svg>foreignObject>section[data-color] h5,div#p>svg>foreignObject>section[data-color] h6{color:currentColor}div#p>svg>foreignObject>section mjx-container[jax=SVG]{direction:ltr}div#p>svg>foreignObject>section mjx-container[jax=SVG]>svg{overflow:visible;min-height:1px;min-width:1px}div#p>svg>foreignObject>section mjx-container[jax=SVG]>svg a{fill:blue;stroke:blue}div#p>svg>foreignObject>section mjx-container[jax=SVG][display=true]{display:block;text-align:center;margin:1em 0}div#p>svg>foreignObject>section mjx-container[jax=SVG][display=true][width=full]{display:flex}div#p>svg>foreignObject>section mjx-container[jax=SVG][justify=left]{text-align:left}div#p>svg>foreignObject>section mjx-container[jax=SVG][justify=right]{text-align:right}div#p>svg>foreignObject>section g[data-mml-node=merror]>g{fill:red;stroke:red}div#p>svg>foreignObject>section g[data-mml-node=merror]>rect[data-background]{fill:yellow;stroke:none}div#p>svg>foreignObject>section g[data-mml-node=mtable]>line[data-line],div#p>svg>foreignObject>section svg[data-table]>g>line[data-line]{stroke-width:70px;fill:none}div#p>svg>foreignObject>section g[data-mml-node=mtable]>rect[data-frame],div#p>svg>foreignObject>section svg[data-table]>g>rect[data-frame]{stroke-width:70px;fill:none}div#p>svg>foreignObject>section g[data-mml-node=mtable]>.mjx-dashed,div#p>svg>foreignObject>section svg[data-table]>g>.mjx-dashed{stroke-dasharray:140}div#p>svg>foreignObject>section g[data-mml-node=mtable]>.mjx-dotted,div#p>svg>foreignObject>section svg[data-table]>g>.mjx-dotted{stroke-linecap:round;stroke-dasharray:0,140}div#p>svg>foreignObject>section g[data-mml-node=mtable]>g>svg{overflow:visible}div#p>svg>foreignObject>section [jax=SVG] mjx-tool{display:inline-block;position:relative;width:0;height:0}div#p>svg>foreignObject>section [jax=SVG] mjx-tool>mjx-tip{position:absolute;top:0;left:0}div#p>svg>foreignObject>section mjx-tool>mjx-tip{display:inline-block;padding:.2em;border:1px solid #888;font-size:70%;background-color:#F8F8F8;color:black;box-shadow:2px 2px 5px #AAAAAA}div#p>svg>foreignObject>section g[data-mml-node=maction][data-toggle]{cursor:pointer}div#p>svg>foreignObject>section mjx-status{display:block;position:fixed;left:1em;bottom:1em;min-width:25%;padding:.2em .4em;border:1px solid #888;font-size:90%;background-color:#F8F8F8;color:black}div#p>svg>foreignObject>section foreignObject[data-mjx-xml]{font-family:initial;line-height:normal;overflow:visible}div#p>svg>foreignObject>section mjx-container[jax=SVG] path[data-c],div#p>svg>foreignObject>section mjx-container[jax=SVG] use[data-c]{stroke-width:3}div#p>svg>foreignObject>section svg[data-marp-fitting=svg]{display:block;height:auto;width:100%}@supports (-ms-ime-align:auto){div#p>svg>foreignObject>section svg[data-marp-fitting=svg]{position:static}}div#p>svg>foreignObject>section svg[data-marp-fitting=svg].__reflow__{content:""}@supports (-ms-ime-align:auto){div#p>svg>foreignObject>section svg[data-marp-fitting=svg].__reflow__{position:relative}}div#p>svg>foreignObject>section [data-marp-fitting-svg-content]{display:table;white-space:nowrap;width:-webkit-max-content;width:-moz-max-content;width:max-content}div#p>svg>foreignObject>section [data-marp-fitting-svg-content-wrap]{white-space:pre}div#p>svg>foreignObject>section img[data-marp-twemoji]{background:transparent;height:1em;margin:0 .05em 0 .1em;vertical-align:-.1em;width:1em}

/* @theme bbdd */

/*****************
 @author: Alberto Díaz-Álvarez
 @version: 1.1
 @update: 2022-01-27
 Based on the work of Paulo Cunha (https://github.com/cunhapaulo/marpstyle)
*****************/

/**********************************************************************/
/* MAIN STYLES */
/**/div#p>svg>foreignObject>section:not(a){--letter-spacing:0.125px;

  /* Reducir todos los colores de la plantilla a los indicados aquí: */--color-primary:#002b36;--color-secondary:#1b998b;--color-tertiary:#f5f5f5;--color-success:#12685e;--color-warning:#d1d646;--color-error:#df2935;--color-neutral:#adadad}

/***************** COMMON STRUCTURE **********************/div#p>svg>foreignObject>section h1{color:var(--color-primary);border-bottom:1px solid var(--color-secondary)}div#p>svg>foreignObject>section code{font-size:100%;font-family:"Fira Code",monospace;line-height:1.2em;padding:0em}div#p>svg>foreignObject>section{background-image:url(https://www.upm.es/sfs/Rectorado/Gabinete%20del%20Rector/Logos/EU_Informatica/ETSI%20SIST_INFORM_COLOR.png);background-size:auto 60px;background-repeat:no-repeat;background-position:right 1em top 1em}div#p>svg>foreignObject>section p{margin-top:0.5em;margin-bottom:0.25em;line-height:1.3em;font-size:100%}div#p>svg>foreignObject>section img{display:block;margin:auto}div#p>svg>foreignObject>section sup{font-size:calc(var(--marpit-root-font-size, 1rem) * 0.4);display:inline-block;vertical-align:super}div#p>svg>foreignObject>section li{margin-top:0.5em;margin-bottom:0.25em;line-height:1.25em;font-size:95%}div#p>svg>foreignObject>section li>ul>li{margin-top:0.5em;margin-bottom:0.25em;line-height:1em;font-size:85%}div#p>svg>foreignObject>section i{color:var(--color-error);font-style:normal}div#p>svg>foreignObject>section s{text-decoration:none;background-color:var(--color-warning)}div#p>svg>foreignObject>section strong{font-weight:600}div#p>svg>foreignObject>section figcaption{font-size:0.7em;color:var(--color-primary);text-align:center}div#p>svg>foreignObject>section figcaption>b{text-align:center;font-weight:600}div#p>svg>foreignObject>section:after{color:var(--color-neutral);font-size:0.7em;content:" " attr(data-marpit-pagination) " / " attr(data-marpit-pagination-total) " "}div#p>svg>foreignObject>section:after{--marpit-root-font-size:0.7em}div#p>svg>foreignObject>section .center{text-align:center}div#p>svg>foreignObject>section .right{text-align:right}div#p>svg>foreignObject>section .small{font-size:24px}div#p>svg>foreignObject>section section.small{--marpit-root-font-size:24px}div#p>svg>foreignObject>section table{margin-right:auto;margin-left:auto;margin-top:20px;width:auto;border:0}div#p>svg>foreignObject>section table th{background-color:var(--color-secondary);color:white;border:0;border-top:rgb(253,74,3) solid 2px;border-top:rgb(255,0,0) solid 2px}div#p>svg>foreignObject>section table td{border:0}div#p>svg>foreignObject>section table tr:nth-child(2){background-color:#dedede}div#p>svg>foreignObject>section table tr:last-child{border-bottom:rgb(253,74,3) solid 2px}div#p>svg>foreignObject>section tr:nth-child(2n){background-color:#e8edf1!important}div#p>svg>foreignObject>section tr:hover{color:rgb(36,34,34);background-color:rgb(255,204,0);font-weight:bold}div#p>svg>foreignObject>section td,div#p>svg>foreignObject>section th{font-size:calc(var(--marpit-root-font-size, 1rem) * 0.7)}div#p>svg>foreignObject>section blockquote{color:var(--color-primary);font-size:unset;border-top:0.1em dashed var(--color-secondary);border-left:0.1em dashed var(--color-secondary);padding-top:0.1em;padding-left:0.5em;margin-top:auto}div#p>svg>foreignObject>section blockquote strong{color:rgb(56,32,32);font-weight:bold;font-size:1.0em}div#p>svg>foreignObject>section blockquote p{font-size:0.6em}div#p>svg>foreignObject>section blockquote sup{vertical-align:sub}div#p>svg>foreignObject>section .columns{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:calc(var(--marpit-root-font-size, 1rem) * 1)
  /* justify-content: center !important; */}div#p>svg>foreignObject>section .columns-center{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:calc(var(--marpit-root-font-size, 1rem) * 1);justify-items:center;justify-content:center;align-items:center}div#p>svg>foreignObject>section .columns-third{display:grid;grid-template-columns:75fr 25fr;gap:calc(var(--marpit-root-font-size, 1rem) * 1)}
/* Estilos para la transparencia de título::after

  <!-- _class: titlepage -->
  # Título
  ## Subtítulo
  ### Autor
  #### Fecha
  ##### Institución
*/div#p>svg>foreignObject>section.titlepage{
  /*background-color: var(--color-tertiary);*/background-image:linear-gradient(rgba(255,255,255,0.9),rgba(255,255,255,0.8),rgba(255,255,255,0.6)),url(https://etsisi.github.io/Styles/images/front-slide-background.png);background-size:auto;background-position:0;background-blend-mode:normal;
    /* fonts sizes */--title-size:150%;--subtitle-size:110%;--author-size:110%;--date-size:90%;--institute-size:90%;--letter-spacing:var(--letter-spacing);

  /* font weights */--title-font-weight:600;--subtitle-font-weight:600;--subtitle-color:#586e75;--subtitle-color:#93a1a1;--titlepage-color:#242d31}div#p>svg>foreignObject>section.titlepage h1{font-size:var(--title-size);font-weight:var(--title-font-weight);text-align:left;line-height:1.25;padding-right:20%}div#p>svg>foreignObject>section.titlepage h2{font-size:var(--subtitle-size);font-weight:var(--subtitle-font-weight);text-align:left;color:var(--subtitle-color);letter-spacing:var(--letter-spacing);line-height:1.2;margin-top:-0.2em;padding-bottom:95px}div#p>svg>foreignObject>section.titlepage h3,div#p>svg>foreignObject>section.titlepage h4,div#p>svg>foreignObject>section.titlepage h5{font-weight:400;color:var(--titlepage-color);line-height:0;letter-spacing:var(--letter-spacing)}div#p>svg>foreignObject>section.titlepage h3{font-size:var(--author-size)}div#p>svg>foreignObject>section.titlepage h4{font-size:var(--date-size)}div#p>svg>foreignObject>section.titlepage h5{font-size:var(--institute-size)}div#p>svg>foreignObject>section.titlepage img{background-color:var(--background-color);border-top:1px solid var(--color-primary);padding-top:0.5em;text-align:left;margin:0}

/* Omits page number in Title Page Slide */div#p>svg>foreignObject>section.titlepage footer,div#p>svg>foreignObject>section.titlepage header,div#p>svg>foreignObject>section.titlepage:after{
  /* hide header, footer and pagination */display:none}

/* Última página de las transparencias */div#p>svg>foreignObject>section.endpage{background-color:var(--color-tertiary);background-image:none;text-align:center!important;font-weight:bold!important;padding-top:auto;padding-bottom:auto}div#p>svg>foreignObject>section.endpage a,div#p>svg>foreignObject>section.endpage h1,div#p>svg>foreignObject>section.endpage h2,div#p>svg>foreignObject>section.endpage p{font-size:200%;border-bottom:none}div#p>svg>foreignObject>section.endpage footer,div#p>svg>foreignObject>section.endpage header,div#p>svg>foreignObject>section.endpage:after{display:none}div#p>svg>foreignObject>section.license{background-image:url(https://etsisi.github.io/Styles/images/end-slide-background.png);background-size:auto;background-position:0;background-blend-mode:luminosity;text-align:center!important;font-weight:bold}div#p>svg>foreignObject>section.license footer,div#p>svg>foreignObject>section.license header,div#p>svg>foreignObject>section.license:after{display:none}div#p>svg>foreignObject>section.license h1{font-size:200%;border-bottom:none;color:var(--color-primary)}div#p>svg>foreignObject>section.license p{font-size:120%;color:var(--color-primary)}div#p>svg>foreignObject>section.license a{border-bottom:none;color:var(--color-error)}

/* Separador de secciones */div#p>svg>foreignObject>section.section{background-image:none;background-color:var(--color-secondary);text-align:center!important;font-weight:bold!important;color:white;padding-top:auto;padding-bottom:auto}div#p>svg>foreignObject>section.section a,div#p>svg>foreignObject>section.section h1,div#p>svg>foreignObject>section.section h2,div#p>svg>foreignObject>section.section p{color:white;font-size:200%;border-bottom:none}div#p>svg>foreignObject>section.section footer,div#p>svg>foreignObject>section.section header,div#p>svg>foreignObject>section.section:after{display:none}

/* Pausa para ejemplo, ejercicio o algo así */div#p>svg>foreignObject>section.accent{background-image:none;background-color:var(--color-warning);color:var(--color-primary);padding-top:auto;padding-bottom:auto}div#p>svg>foreignObject>section.accent a,div#p>svg>foreignObject>section.accent h1,div#p>svg>foreignObject>section.accent h2,div#p>svg>foreignObject>section.accent p{text-align:center;border-bottom:none;font-weight:bold!important}div#p>svg>foreignObject>section.accent h1{font-size:200%}div#p>svg>foreignObject>section.accent h2{font-size:100%}div#p>svg>foreignObject>section.accent ol{padding-left:6em}div#p>svg>foreignObject>section.accent footer,div#p>svg>foreignObject>section.accent header,div#p>svg>foreignObject>section.accent:after{display:none}

/* Cita de alguien famoso */div#p>svg>foreignObject>section.cite{background-color:var(--color-tertiary);--strong-color:rgb(182,112,27);background-image:none}div#p>svg>foreignObject>section.cite p{color:black;letter-spacing:var(--letter-spacing);font-size:150%;text-align:center;line-height:1.25em;font-family:Cambria,Cochin,Georgia,Times,"Times New Roman",serif;padding-top:auto;padding-bottom:auto;padding-left:100px;padding-right:100px}div#p>svg>foreignObject>section.cite strong{color:var(--strong-color)}

/* Omits page number in Title Page Slide */div#p>svg>foreignObject>section.cite footer,div#p>svg>foreignObject>section.cite header,div#p>svg>foreignObject>section.cite:after{
  /* hide header, footer and pagination */display:none}div#p>svg>foreignObject>section .cite-author{text-align:right}div#p>svg>foreignObject>section .cite-author:after{color:#083d77;font-size:125%;font-weight:bold;font-family:Cambria,Cochin,Georgia,Times,'Times New Roman',serif;padding-right:130px}div#p>svg>foreignObject>section section.cite-author:after{--marpit-root-font-size:125%}div#p>svg>foreignObject>section .cite-author[data-text]:after{content:" - " attr(data-text) " - "}div#p>svg>foreignObject>section .cite-author p{padding-bottom:40px}


/******************* cool-list *****************************/div#p>svg>foreignObject>section.cool-list ol{counter-reset:li;list-style:none;padding:0}div#p>svg>foreignObject>section.cool-list li{margin-bottom:0.1em!important;margin-top:0.1em!important}div#p>svg>foreignObject>section.cool-list ol>li>em,div#p>svg>foreignObject>section.cool-list>ol>li>a{position:relative;display:block;padding:0.4em 0.4em 0.4em 2em;margin:0.5em 0.5em 0.5em 1em;background:#ddd;color:#444;text-decoration:none;border-radius:0.3em;transition:all 0.3s ease-out;font-style:normal}div#p>svg>foreignObject>section.cool-list ol>li>em:before,div#p>svg>foreignObject>section.cool-list>ol>li>a:before{content:counter(li);counter-increment:li;position:absolute;left:-1.3em;top:50%;margin-top:-1.3em;background:var(--color-secondary);height:2em;width:2em;line-height:2em;border:0.3em solid #fff;text-align:center;font-weight:normal;border-radius:2em;transition:all 0.3s ease-out;color:white}div#p>svg>foreignObject>section.cool-list>ol>li>a:hover,div#p>svg>foreignObject>section.cool-list>ol>li>em:hover{background:#eee;font-weight:bolder}

/* Lists inside lists */div#p>svg>foreignObject>section.cool-list>ol ol{margin:0 0 0 2em;
  /* Add some left margin for inner lists */font-size:75%;counter-reset:li2
  /* Initiate a counter */}div#p>svg>foreignObject>section.cool-list>ol ol>li>a:before,div#p>svg>foreignObject>section.cool-list>ol ol>li>em:before{content:counter(li2);counter-increment:li2}div#p>svg>foreignObject>section.cool-list>ol>li>ul{list-style-type:disc;margin:0 0 0 1em;font-size:75%}div#p>svg>foreignObject>section.cool-list>ol ol>li>em{background:#efefef}


/************************* BIBLIO *****************************/div#p>svg>foreignObject>section.biblio{background-color:var(--color-tertiary);background-image:none}div#p>svg>foreignObject>section.biblio p{color:var(--color-primary);font-size:90%}div#p>svg>foreignObject>section.biblio h1{color:var(--color-primary);border-bottom:1px solid var(--color-primary)}div#p>svg>foreignObject>section.biblio strong{color:var(--color-primary)}div#p>svg>foreignObject>section.biblio a{font-weight:bold;color:var(--color-primary)}div#p>svg>foreignObject>section.biblio li{color:var(--color-primary)}div#p>svg>foreignObject>section.biblio footer,div#p>svg>foreignObject>section.biblio header,div#p>svg>foreignObject>section.biblio:after{display:none}div#p>svg>foreignObject>section[data-marpit-advanced-background=background]{columns:initial!important;display:block!important;padding:0!important}div#p>svg>foreignObject>section[data-marpit-advanced-background=background]:after,div#p>svg>foreignObject>section[data-marpit-advanced-background=background]:before,div#p>svg>foreignObject>section[data-marpit-advanced-background=content]:after,div#p>svg>foreignObject>section[data-marpit-advanced-background=content]:before{display:none!important}div#p>svg>foreignObject>section[data-marpit-advanced-background=background]>div[data-marpit-advanced-background-container]{all:initial;display:flex;flex-direction:row;height:100%;overflow:hidden;width:100%}div#p>svg>foreignObject>section[data-marpit-advanced-background=background]>div[data-marpit-advanced-background-container][data-marpit-advanced-background-direction=vertical]{flex-direction:column}div#p>svg>foreignObject>section[data-marpit-advanced-background=background][data-marpit-advanced-background-split]>div[data-marpit-advanced-background-container]{width:var(--marpit-advanced-background-split,50%)}div#p>svg>foreignObject>section[data-marpit-advanced-background=background][data-marpit-advanced-background-split=right]>div[data-marpit-advanced-background-container]{margin-left:calc(100% - var(--marpit-advanced-background-split, 50%))}div#p>svg>foreignObject>section[data-marpit-advanced-background=background]>div[data-marpit-advanced-background-container]>figure{all:initial;background-position:center;background-repeat:no-repeat;background-size:cover;flex:auto;margin:0}div#p>svg>foreignObject>section[data-marpit-advanced-background=content],div#p>svg>foreignObject>section[data-marpit-advanced-background=pseudo]{background:transparent!important}div#p>svg>foreignObject>section[data-marpit-advanced-background=pseudo],div#p>svg[data-marpit-svg]>foreignObject[data-marpit-advanced-background=pseudo]{pointer-events:none!important}div#p>svg>foreignObject>section[data-marpit-advanced-background-split]{width:100%;height:100%}</style></head><body><div class="bespoke-marp-osc"><button data-bespoke-marp-osc="prev" tabindex="-1" title="Previous slide">Previous slide</button><span data-bespoke-marp-osc="page"></span><button data-bespoke-marp-osc="next" tabindex="-1" title="Next slide">Next slide</button><button data-bespoke-marp-osc="fullscreen" tabindex="-1" title="Toggle fullscreen (f)">Toggle fullscreen</button><button data-bespoke-marp-osc="presenter" tabindex="-1" title="Open presenter view (p)">Open presenter view</button></div><div id="p"><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="1" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-class="titlepage" data-theme="bbdd" class="titlepage" data-marpit-pagination="1" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--class:titlepage;--theme:bbdd;">
<header>Gestión de bases de datos</header>

<h1>Gestión de bases de datos</h1>
<h2>Bases de datos</h2>
<h3>Departamento de Sistemas Informáticos</h3>
<h4>E.T.S.I. de Sistemas Informáticos - UPM</h4>
<h5>15 de febrero de 2024</h5>
<p><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><img src="https://mirrors.creativecommons.org/presskit/buttons/80x15/svg/by-nc-sa.svg" alt="" style="height:30px;" /></a></p>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="2" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="2" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Índice</h1>
<ol>
<li>Transacciones</li>
<li>Procedimientos almacenados</li>
<li>Funciones almacenadas</li>
<li>Cursores</li>
<li>Triggers</li>
<li>Índices</li>
<li>Gestión de usuarios</li>
</ol>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="3" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-class="section" data-theme="bbdd" class="section" data-marpit-pagination="3" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--class:section;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>TRANSACCIONES</h1>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="4" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="4" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>El problema (I)</h1>
<p>Tendemos a pensar que los SGBD son aplicaciones monousuario</p>
<ul>
<li>Pero una de sus principales ventajas es el <strong>acceso concurrente a los datos</strong></li>
</ul>
<p><img src="img/t5/cliente-servidor.png" alt="center" /></p>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="5" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="5" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>El problema (y II)</h1>
<p>Para entender el problema que motiva el uso de transacciones, vamos a realizar varias suposiciones:</p>
<ul>
<li>Una <strong>base de datos</strong> se representa básicamente como una colección de elementos de datos con nombres:</li>
</ul>
<p><mjx-container class="MathJax" jax="SVG" display="true" style="margin: 0"><svg style="vertical-align: -0.566ex; display: block; width: 100%; height: auto; max-height: 2.262ex" xmlns="http://www.w3.org/2000/svg" width="16.006ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 7074.7 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="7B" d="M434 -231Q434 -244 428 -250H410Q281 -250 230 -184Q225 -177 222 -172T217 -161T213 -148T211 -133T210 -111T209 -84T209 -47T209 0Q209 21 209 53Q208 142 204 153Q203 154 203 155Q189 191 153 211T82 231Q71 231 68 234T65 250T68 266T82 269Q116 269 152 289T203 345Q208 356 208 377T209 529V579Q209 634 215 656T244 698Q270 724 324 740Q361 748 377 749Q379 749 390 749T408 750H428Q434 744 434 732Q434 719 431 716Q429 713 415 713Q362 710 332 689T296 647Q291 634 291 499V417Q291 370 288 353T271 314Q240 271 184 255L170 250L184 245Q202 239 220 230T262 196T290 137Q291 131 291 1Q291 -134 296 -147Q306 -174 339 -192T415 -213Q429 -213 431 -216Q434 -219 434 -231Z"></path></g><g data-mml-node="mi" transform="translate(500,0)"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"></path></g><g data-mml-node="mo" transform="translate(1250,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(1694.7,0)"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"></path></g><g data-mml-node="mo" transform="translate(2453.7,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(2898.3,0)"><path data-c="1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"></path></g><g data-mml-node="mo" transform="translate(3750.3,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(4195,0)"><path data-c="1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"></path></g><g data-mml-node="mo" transform="translate(4958,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mo" transform="translate(5402.7,0)"><path data-c="2026" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60ZM525 60Q525 84 542 102T585 120Q609 120 627 104T646 61Q646 36 629 18T586 0T543 17T525 60ZM972 60Q972 84 989 102T1032 120Q1056 120 1074 104T1093 61Q1093 36 1076 18T1033 0T990 17T972 60Z"></path></g><g data-mml-node="mo" transform="translate(6574.7,0)"><path data-c="7D" d="M65 731Q65 745 68 747T88 750Q171 750 216 725T279 670Q288 649 289 635T291 501Q292 362 293 357Q306 312 345 291T417 269Q428 269 431 266T434 250T431 234T417 231Q380 231 345 210T298 157Q293 143 292 121T291 -28V-79Q291 -134 285 -156T256 -198Q202 -250 89 -250Q71 -250 68 -247T65 -230Q65 -224 65 -223T66 -218T69 -214T77 -213Q91 -213 108 -210T146 -200T183 -177T207 -139Q208 -134 209 3L210 139Q223 196 280 230Q315 247 330 250Q305 257 280 270Q225 304 212 352L210 362L209 498Q208 635 207 640Q195 680 154 696T77 713Q68 713 67 716T65 731Z"></path></g></g></g></svg></mjx-container></p><ul>
<li>Se definen dos operaciones:
<ul>
<li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex" xmlns="http://www.w3.org/2000/svg" width="14.403ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 6366 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D695" d="M51 573Q51 602 73 610H76Q79 610 84 610T97 610T113 610T133 611T155 611T179 611H282Q301 598 304 586V76H452Q466 67 470 60T474 38Q474 10 452 1H73Q51 9 51 32V38Q51 54 54 60T73 76H220V535H146L73 536Q51 545 51 567V573Z"></path><path data-c="1D68E" d="M48 217Q48 295 100 361T248 439L258 440Q268 440 274 440Q329 438 369 416T428 359T456 292T464 228Q464 215 461 208T454 198T442 190L288 189H135L138 179Q153 132 199 102T303 71Q336 71 353 86T380 120T398 143Q404 146 422 146Q453 146 462 126Q464 120 464 116Q464 84 416 39T285 -6Q187 -6 118 59T48 217ZM377 264Q371 291 365 306T341 338T294 362Q288 363 264 363Q225 363 190 336T139 264H377Z" transform="translate(525,0)"></path><path data-c="1D68E" d="M48 217Q48 295 100 361T248 439L258 440Q268 440 274 440Q329 438 369 416T428 359T456 292T464 228Q464 215 461 208T454 198T442 190L288 189H135L138 179Q153 132 199 102T303 71Q336 71 353 86T380 120T398 143Q404 146 422 146Q453 146 462 126Q464 120 464 116Q464 84 416 39T285 -6Q187 -6 118 59T48 217ZM377 264Q371 291 365 306T341 338T294 362Q288 363 264 363Q225 363 190 336T139 264H377Z" transform="translate(1050,0)"></path><path data-c="1D69B" d="M327 76Q359 76 369 70T380 38Q380 10 359 1H47Q24 8 24 38Q24 54 28 61T47 76H145V355H96L47 356Q24 363 24 393Q24 409 28 416T47 431H207Q223 419 226 414T229 393V387V369Q297 437 394 437Q436 437 461 417T487 368Q487 347 473 332T438 317Q428 317 420 320T407 327T398 337T393 347T390 356L388 361Q348 356 324 345Q228 299 228 170Q228 161 228 151T229 138V76H293H327Z" transform="translate(1575,0)"></path></g><g data-mml-node="mi" transform="translate(2100,0)"><path data-c="5F" d="M57 -60Q57 -33 86 -25H438Q468 -34 468 -60T438 -95H86Q57 -86 57 -60Z"></path></g><g data-mml-node="mi" transform="translate(2625,0)"><path data-c="1D692" d="M202 538T202 559T218 596T260 612Q283 612 300 597T317 560Q317 538 300 523T260 507Q235 507 219 522ZM411 76Q441 76 451 69T462 38Q462 29 462 26T460 18T453 9T440 1H94Q72 8 72 33V38Q72 46 72 49T74 58T81 68T94 76H233V355H167L102 356Q80 363 80 393Q80 418 91 425T138 432Q145 432 165 432T200 431H295Q297 429 303 425T310 420T314 415T317 404T317 389T318 363Q318 354 318 314T317 241V76H378H411Z"></path><path data-c="1D69D" d="M25 395Q26 405 26 408T29 416T35 423T48 431H145V481L146 532Q154 547 161 550T184 554H189Q218 554 227 534Q229 529 229 480V431H405Q406 430 411 427T418 422T422 416T426 407T427 393Q427 387 427 382T424 374T421 368T417 363T413 360T408 358L405 356L317 355H229V249Q229 237 229 214T228 179Q228 126 241 98T295 70Q354 70 365 149Q366 167 375 174Q383 182 407 182H415Q438 182 446 166Q448 161 448 148Q448 84 398 39T282 -6Q226 -6 189 29T146 128Q145 134 145 247V355H96H72Q45 355 35 362T25 395Z" transform="translate(525,0)"></path><path data-c="1D68E" d="M48 217Q48 295 100 361T248 439L258 440Q268 440 274 440Q329 438 369 416T428 359T456 292T464 228Q464 215 461 208T454 198T442 190L288 189H135L138 179Q153 132 199 102T303 71Q336 71 353 86T380 120T398 143Q404 146 422 146Q453 146 462 126Q464 120 464 116Q464 84 416 39T285 -6Q187 -6 118 59T48 217ZM377 264Q371 291 365 306T341 338T294 362Q288 363 264 363Q225 363 190 336T139 264H377Z" transform="translate(1050,0)"></path><path data-c="1D696" d="M133 76Q156 74 164 67T172 38Q172 9 151 1H11Q-12 8 -12 38Q-12 61 5 73Q10 75 28 76H45V355H28Q10 356 5 358Q-12 370 -12 393Q-12 419 11 431H52H70Q91 431 100 427T116 405Q163 436 200 436Q255 436 281 390L285 394Q289 398 292 400T301 407T314 415T329 423T346 429T366 434T389 436H392Q425 436 448 411Q469 390 474 360T480 268V232V203V76H497Q520 74 528 67T536 38Q536 9 515 1H396Q374 9 374 32V38Q374 73 402 76H409V191V242Q409 317 404 339T375 361Q343 361 323 332T299 264Q298 258 298 165V76H315Q338 74 346 67T354 38Q354 9 333 1H214Q192 9 192 32V38Q192 73 220 76H227V191V242Q227 317 222 339T193 361Q161 361 141 332T117 264Q116 258 116 165V76H133Z" transform="translate(1575,0)"></path></g></g><g data-mml-node="mo" transform="translate(4736,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(5125,0)"><path data-c="1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"></path></g><g data-mml-node="mo" transform="translate(5977,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>: Lee un elemento de la base de datos llamado <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0" xmlns="http://www.w3.org/2000/svg" width="1.928ex" height="1.545ex" role="img" focusable="false" viewBox="0 -683 852 683"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"></path></g></g></g></svg></mjx-container> en una variable <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0" xmlns="http://www.w3.org/2000/svg" width="1.928ex" height="1.545ex" role="img" focusable="false" viewBox="0 -683 852 683"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"></path></g></g></g></svg></mjx-container> del programa</li>
<li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex" xmlns="http://www.w3.org/2000/svg" width="19.154ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 8466 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D68E" d="M48 217Q48 295 100 361T248 439L258 440Q268 440 274 440Q329 438 369 416T428 359T456 292T464 228Q464 215 461 208T454 198T442 190L288 189H135L138 179Q153 132 199 102T303 71Q336 71 353 86T380 120T398 143Q404 146 422 146Q453 146 462 126Q464 120 464 116Q464 84 416 39T285 -6Q187 -6 118 59T48 217ZM377 264Q371 291 365 306T341 338T294 362Q288 363 264 363Q225 363 190 336T139 264H377Z"></path><path data-c="1D69C" d="M72 317Q72 361 108 396T229 439Q231 439 245 439T268 440Q303 439 324 435T353 427T363 423L372 432Q380 440 397 440Q430 440 430 395Q430 390 430 380T429 366V335Q429 311 422 302T387 293Q364 293 355 300T346 316T343 336T325 353Q306 364 257 364Q209 364 178 351T147 317Q147 284 231 272Q327 256 357 247Q458 210 458 129V121Q458 74 413 34T271 -6Q246 -6 224 -3T189 5T165 14T150 22T144 26Q142 23 139 18T135 11T132 6T128 1T124 -2T119 -4T113 -5T104 -6Q84 -6 78 6T71 43Q71 48 71 60T72 79Q72 132 73 141T81 157Q90 166 115 166Q135 166 142 162T157 140Q168 108 191 90T260 70Q297 70 323 76T361 91T379 110T384 129Q384 157 346 171T247 195T165 212Q119 228 96 256T72 317Z" transform="translate(525,0)"></path><path data-c="1D68C" d="M291 -6Q196 -6 131 60T66 216Q66 296 119 361Q154 403 200 421T273 439Q275 440 293 440H313Q400 440 433 409Q454 388 454 359Q454 335 439 321T402 306Q380 306 365 321T350 357V362L340 363Q339 363 326 363T303 364Q280 364 266 362Q217 352 184 313T151 215Q151 153 199 112T313 70Q341 70 357 85T381 118T394 140Q402 146 424 146Q443 146 447 144Q466 137 466 117Q466 106 457 88T429 47T374 10T291 -6Z" transform="translate(1050,0)"></path><path data-c="1D69B" d="M327 76Q359 76 369 70T380 38Q380 10 359 1H47Q24 8 24 38Q24 54 28 61T47 76H145V355H96L47 356Q24 363 24 393Q24 409 28 416T47 431H207Q223 419 226 414T229 393V387V369Q297 437 394 437Q436 437 461 417T487 368Q487 347 473 332T438 317Q428 317 420 320T407 327T398 337T393 347T390 356L388 361Q348 356 324 345Q228 299 228 170Q228 161 228 151T229 138V76H293H327Z" transform="translate(1575,0)"></path><path data-c="1D692" d="M202 538T202 559T218 596T260 612Q283 612 300 597T317 560Q317 538 300 523T260 507Q235 507 219 522ZM411 76Q441 76 451 69T462 38Q462 29 462 26T460 18T453 9T440 1H94Q72 8 72 33V38Q72 46 72 49T74 58T81 68T94 76H233V355H167L102 356Q80 363 80 393Q80 418 91 425T138 432Q145 432 165 432T200 431H295Q297 429 303 425T310 420T314 415T317 404T317 389T318 363Q318 354 318 314T317 241V76H378H411Z" transform="translate(2100,0)"></path><path data-c="1D68B" d="M4 573Q4 596 15 603T52 611H90H124Q146 611 155 608T171 591Q173 586 173 491V396L182 402Q217 424 256 431Q280 437 309 437Q376 437 434 379T492 217Q492 162 473 118T422 47T358 8T293 -6Q229 -6 174 38Q171 13 163 7T135 1H131H122Q99 1 90 23L89 279V535H58L27 536Q4 543 4 573ZM409 215Q409 269 377 315T283 361Q255 361 224 344T177 297L173 290V167Q189 124 213 97T278 70Q330 70 369 111T409 215Z" transform="translate(2625,0)"></path><path data-c="1D692" d="M202 538T202 559T218 596T260 612Q283 612 300 597T317 560Q317 538 300 523T260 507Q235 507 219 522ZM411 76Q441 76 451 69T462 38Q462 29 462 26T460 18T453 9T440 1H94Q72 8 72 33V38Q72 46 72 49T74 58T81 68T94 76H233V355H167L102 356Q80 363 80 393Q80 418 91 425T138 432Q145 432 165 432T200 431H295Q297 429 303 425T310 420T314 415T317 404T317 389T318 363Q318 354 318 314T317 241V76H378H411Z" transform="translate(3150,0)"></path><path data-c="1D69B" d="M327 76Q359 76 369 70T380 38Q380 10 359 1H47Q24 8 24 38Q24 54 28 61T47 76H145V355H96L47 356Q24 363 24 393Q24 409 28 416T47 431H207Q223 419 226 414T229 393V387V369Q297 437 394 437Q436 437 461 417T487 368Q487 347 473 332T438 317Q428 317 420 320T407 327T398 337T393 347T390 356L388 361Q348 356 324 345Q228 299 228 170Q228 161 228 151T229 138V76H293H327Z" transform="translate(3675,0)"></path></g><g data-mml-node="mi" transform="translate(4200,0)"><path data-c="5F" d="M57 -60Q57 -33 86 -25H438Q468 -34 468 -60T438 -95H86Q57 -86 57 -60Z"></path></g><g data-mml-node="mi" transform="translate(4725,0)"><path data-c="1D692" d="M202 538T202 559T218 596T260 612Q283 612 300 597T317 560Q317 538 300 523T260 507Q235 507 219 522ZM411 76Q441 76 451 69T462 38Q462 29 462 26T460 18T453 9T440 1H94Q72 8 72 33V38Q72 46 72 49T74 58T81 68T94 76H233V355H167L102 356Q80 363 80 393Q80 418 91 425T138 432Q145 432 165 432T200 431H295Q297 429 303 425T310 420T314 415T317 404T317 389T318 363Q318 354 318 314T317 241V76H378H411Z"></path><path data-c="1D69D" d="M25 395Q26 405 26 408T29 416T35 423T48 431H145V481L146 532Q154 547 161 550T184 554H189Q218 554 227 534Q229 529 229 480V431H405Q406 430 411 427T418 422T422 416T426 407T427 393Q427 387 427 382T424 374T421 368T417 363T413 360T408 358L405 356L317 355H229V249Q229 237 229 214T228 179Q228 126 241 98T295 70Q354 70 365 149Q366 167 375 174Q383 182 407 182H415Q438 182 446 166Q448 161 448 148Q448 84 398 39T282 -6Q226 -6 189 29T146 128Q145 134 145 247V355H96H72Q45 355 35 362T25 395Z" transform="translate(525,0)"></path><path data-c="1D68E" d="M48 217Q48 295 100 361T248 439L258 440Q268 440 274 440Q329 438 369 416T428 359T456 292T464 228Q464 215 461 208T454 198T442 190L288 189H135L138 179Q153 132 199 102T303 71Q336 71 353 86T380 120T398 143Q404 146 422 146Q453 146 462 126Q464 120 464 116Q464 84 416 39T285 -6Q187 -6 118 59T48 217ZM377 264Q371 291 365 306T341 338T294 362Q288 363 264 363Q225 363 190 336T139 264H377Z" transform="translate(1050,0)"></path><path data-c="1D696" d="M133 76Q156 74 164 67T172 38Q172 9 151 1H11Q-12 8 -12 38Q-12 61 5 73Q10 75 28 76H45V355H28Q10 356 5 358Q-12 370 -12 393Q-12 419 11 431H52H70Q91 431 100 427T116 405Q163 436 200 436Q255 436 281 390L285 394Q289 398 292 400T301 407T314 415T329 423T346 429T366 434T389 436H392Q425 436 448 411Q469 390 474 360T480 268V232V203V76H497Q520 74 528 67T536 38Q536 9 515 1H396Q374 9 374 32V38Q374 73 402 76H409V191V242Q409 317 404 339T375 361Q343 361 323 332T299 264Q298 258 298 165V76H315Q338 74 346 67T354 38Q354 9 333 1H214Q192 9 192 32V38Q192 73 220 76H227V191V242Q227 317 222 339T193 361Q161 361 141 332T117 264Q116 258 116 165V76H133Z" transform="translate(1575,0)"></path></g></g><g data-mml-node="mo" transform="translate(6836,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(7225,0)"><path data-c="1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"></path></g><g data-mml-node="mo" transform="translate(8077,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>: Escribe el valor de la variable de programa <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0" xmlns="http://www.w3.org/2000/svg" width="1.928ex" height="1.545ex" role="img" focusable="false" viewBox="0 -683 852 683"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"></path></g></g></g></svg></mjx-container> en el elemento de la base de datos llamado <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0" xmlns="http://www.w3.org/2000/svg" width="1.928ex" height="1.545ex" role="img" focusable="false" viewBox="0 -683 852 683"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"></path></g></g></g></svg></mjx-container></li>
</ul>
</li>
</ul>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="6" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="6" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Problema de la actualización perdida (I)</h1>
<p><img src="img/t5/ap1.png" alt="center" style="width:700px;" /></p>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="7" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="7" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Problema de la actualización perdida (II)</h1>
<p><img src="img/t5/ap2.png" alt="center" style="width:700px;" /></p>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="8" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="8" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Problema de la actualización perdida (y III)</h1>
<p><img src="img/t5/ap3.png" alt="center" style="width:700px;" /></p>
<p>El elemento X tiene un valor incorrecto porque su actualización se pierde (se sobrescribe)</p>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="9" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="9" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Problema de la lectura sucia (I)</h1>
<p><img src="img/t5/ls1.png" alt="center" style="width:700px;" /></p>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="10" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="10" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Problema de la lectura sucia (y II)</h1>
<p><img src="img/t5/ls2.png" alt="center" style="width:700px;" /></p>
<p>Se ha leído un valor de X que no es el correcto, pues se debería haber restaurado tras el error</p>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="11" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="11" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Problema del resumen incorrecto (I)</h1>
<p><img src="img/t5/ri1.png" alt="center" style="width:700px;" /></p>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="12" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="12" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Problema del resumen incorrecto (y II)</h1>
<p><img src="img/t5/ri2.png" alt="center" style="width:700px;" /></p>
<p>Se ha leído un valor inconsistente de <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0" xmlns="http://www.w3.org/2000/svg" width="1.726ex" height="1.545ex" role="img" focusable="false" viewBox="0 -683 763 683"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"></path></g></g></g></svg></mjx-container>, ya que la lectura se ha adelantado a la actualización de su valor</p>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="13" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="13" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Cómo evitar los errores anteriores (I)</h1>
<p>Se podrían agrupar varias instrucciones de lecturas y escrituras de forma que se ejecuten de forma <s>atómica</s></p>
<p><img src="img/t5/atomica.png" alt="center" style="width:450px;" /></p>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="14" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="14" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Cómo evitar los errores anteriores (II)</h1>
<p>La ejecución de un conjunto de operaciones debe dejar la base de datos en un estado <s>consistente</s></p>
<p><img src="img/t5/consistente.png" alt="center" style="width:450px;" /></p>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="15" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="15" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Cómo evitar los errores anteriores (III)</h1>
<p>Las instrucciones agrupadas deberían ejecutarse de manera <s>aislada</s>, de forma que dos conjuntos de instrucciones que no dependan entre sí, se ejecutarían simultáneamente:</p>
<p><img src="img/t5/aislada.png" alt="center" style="width:400px;" /></p>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="16" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="16" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Cómo evitar los errores anteriores (y IV)</h1>
<p>Los cambios realizados por las operaciones deben ser <s>duraderos</s>, de forma que no les afecten los fallos:</p>
<p><img src="img/t5/duraderos.png" alt="center" style="width:400px;" /></p>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="17" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="17" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Propiedades deseables: ACID</h1>
<p>Deben cumplirse en un SGBD para evitar los errores relacionados con el acceso concurrente a los datos</p>
<ul>
<li><strong><s>A</s>tomicity</strong>: Instrucciones se ejecutan de manera autónoma</li>
<li><strong><s>C</s>onsistency</strong>: Los cambios deben dejar la base de datos en un estado consistente</li>
<li><strong><s>I</s>solation</strong>: Las instrucciones se ejecutan de manera aislada, sin interdependencias</li>
<li><strong><s>D</s>urability</strong>: Todo cambio debe ser durable en el tiempo y tolerante a fallos</li>
</ul>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="18" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="18" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>¿Qué es una transacción?</h1>
<ul>
<li>Es una agrupación de operaciones sobre una base de datos que se ejecutan de forma <strong>atómica</strong>, <strong>aislada</strong>, mantienen la <strong>consistencia</strong> de la base de datos y los cambios realizados son <strong>duraderos</strong></li>
<li>En otras palabras, cumple con las propiedades ACID descritas anteriormente</li>
<li>El lenguaje SQL nos permite agrupar consultas como transacciones, además de ejecutarlas, confirmarlas y deshacerlas en caso de error</li>
</ul>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="19" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="19" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Estados de una transacción</h1>
<p><img src="img/t5/transaccion.png" alt="center" /></p>
<p>Imagen extraída de “<em>Fundamentals of Database Systems</em>”, Elmasri, Navathe.</p>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="20" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="20" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>SQL para transacciones (I)</h1>
<p>Empezar una transacción:</p>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-keyword">START</span> TRANSACTION [opción1, opción2, ...]
<span class="hljs-comment">-- Alternativa</span>
<span class="hljs-keyword">BEGIN</span> [WORK]
</span></span></foreignObject></svg></code></pre>
<p>Las opciones que se pueden establecer para la transacción:</p>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-keyword">WITH</span> CONSISTENT SNAPSHOT <span class="hljs-comment">-- Lecturas consistentes</span>
READ WRITE <span class="hljs-comment">-- Transacción de lectura/escritura</span>
READ <span class="hljs-keyword">ONLY</span> <span class="hljs-comment">-- Prohíbe operaciones de escritura</span>
</span></span></foreignObject></svg></code></pre>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="21" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="21" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>SQL para transacciones (y II)</h1>
<p>Confirmar los cambios de una transacción</p>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-keyword">COMMIT</span> [WORK] [<span class="hljs-keyword">AND</span> [<span class="hljs-keyword">NO</span>] CHAIN] [[<span class="hljs-keyword">NO</span>] <span class="hljs-keyword">RELEASE</span>]
</span></span></foreignObject></svg></code></pre>
<ul>
<li><code>CHAIN</code>: Abre una nueva transacción inmediatamente a continuación de que se complete ésta.</li>
<li><code>RELEASE</code>: Desconecta el cliente tan pronto se ejecuta la transacción.</li>
</ul>
<p>Deshacer los cambios de una transacción:</p>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-keyword">ROLLBACK</span> [WORK] [<span class="hljs-keyword">AND</span> [<span class="hljs-keyword">NO</span>] CHAIN] [[<span class="hljs-keyword">NO</span>] <span class="hljs-keyword">RELEASE</span>]
</span></span></foreignObject></svg></code></pre>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="22" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="22" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Ejemplos de transacciones</h1>
<p>Lectura de un valor y, a continuación, escritura del valor leído:</p>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-keyword">START</span> TRANSACTION;
<span class="hljs-keyword">SELECT</span> <span class="hljs-variable">@A</span>:<span class="hljs-operator">=</span><span class="hljs-built_in">SUM</span>(salary) <span class="hljs-keyword">FROM</span> table1 <span class="hljs-keyword">WHERE</span> type<span class="hljs-operator">=</span><span class="hljs-number">1</span>;
UPDATE table2 <span class="hljs-keyword">SET</span> summary<span class="hljs-operator">=</span><span class="hljs-variable">@A</span> <span class="hljs-keyword">WHERE</span> type<span class="hljs-operator">=</span><span class="hljs-number">1</span>;
<span class="hljs-keyword">COMMIT</span>;
</span></span></foreignObject></svg></code></pre>
<p>Transferencia de dinero entre cuentas bancarias:</p>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-keyword">START</span> TRANSACTION;
UPDATE sb_accounts
<span class="hljs-keyword">SET</span> balance <span class="hljs-operator">=</span> balance <span class="hljs-operator">-</span> <span class="hljs-number">1000</span>
<span class="hljs-keyword">WHERE</span> account_no <span class="hljs-operator">=</span> <span class="hljs-number">932656</span>;
UPDATE ca_accounts
<span class="hljs-keyword">SET</span> balance <span class="hljs-operator">=</span> balance <span class="hljs-operator">+</span> <span class="hljs-number">1000</span>
<span class="hljs-keyword">WHERE</span> account_no <span class="hljs-operator">=</span> <span class="hljs-number">933456</span> ;
<span class="hljs-keyword">COMMIT</span>;
</span></span></foreignObject></svg></code></pre>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="23" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="23" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Confirmación automática</h1>
<p>En MySQL, las transacciones se confirman de forma automática</p>
<ul>
<li>Esto es, cada consulta ejecutada se convierte en una transacción y se confirma automáticamente</li>
<li>Se puede activar/desactivar este comportamiento con la siguiente consulta</li>
</ul>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-keyword">SET</span> autocommit <span class="hljs-operator">=</span> {<span class="hljs-number">0</span> <span class="hljs-operator">|</span> <span class="hljs-number">1</span>}
</span></span></foreignObject></svg></code></pre>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="24" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="24" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Control de la concurrencia</h1>
<p>Los SGBD ejecutan transacciones de manera concurrente.</p>
<ul>
<li>Esto da lugar a los problemas asociados a la concurrencia.</li>
<li>Una forma de solucionar dichos problemas es mediante el uso de bloqueos:
<ul>
<li>Bloqueos de lectura y escritura.</li>
<li>Bloqueo en dos fases.</li>
<li>Bloqueo optimista y pesimista.</li>
</ul>
</li>
</ul>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="25" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="25" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Bloqueos para lectura y escritura</h1>
<p>Se gestionan mediante tres operaciones</p>
<ul>
<li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex" xmlns="http://www.w3.org/2000/svg" width="14.378ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 6355 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D69B" d="M327 76Q359 76 369 70T380 38Q380 10 359 1H47Q24 8 24 38Q24 54 28 61T47 76H145V355H96L47 356Q24 363 24 393Q24 409 28 416T47 431H207Q223 419 226 414T229 393V387V369Q297 437 394 437Q436 437 461 417T487 368Q487 347 473 332T438 317Q428 317 420 320T407 327T398 337T393 347T390 356L388 361Q348 356 324 345Q228 299 228 170Q228 161 228 151T229 138V76H293H327Z"></path><path data-c="1D68E" d="M48 217Q48 295 100 361T248 439L258 440Q268 440 274 440Q329 438 369 416T428 359T456 292T464 228Q464 215 461 208T454 198T442 190L288 189H135L138 179Q153 132 199 102T303 71Q336 71 353 86T380 120T398 143Q404 146 422 146Q453 146 462 126Q464 120 464 116Q464 84 416 39T285 -6Q187 -6 118 59T48 217ZM377 264Q371 291 365 306T341 338T294 362Q288 363 264 363Q225 363 190 336T139 264H377Z" transform="translate(525,0)"></path><path data-c="1D68A" d="M126 306Q105 306 90 321T74 359Q74 439 211 439Q268 439 276 438Q343 426 383 390T430 306Q431 301 431 190V81Q446 79 465 78T492 76T509 72T521 60T524 38Q524 11 506 3Q502 1 466 1Q426 1 406 5T379 14T355 36L345 30Q284 -6 205 -6Q135 -6 92 39T48 141Q48 182 79 212T158 256T252 278T342 285H347V290Q347 315 325 335T267 362Q258 363 224 363Q189 363 185 362H179L178 358Q178 353 178 352T176 345T174 337T170 330T165 322T158 316T150 311T139 308T126 306ZM132 140Q132 115 157 93T224 70Q269 70 302 87T344 133Q346 139 347 175V211H339Q256 209 194 190T132 140Z" transform="translate(1050,0)"></path><path data-c="1D68D" d="M266 573Q266 596 277 603T314 611H352H385Q411 611 419 607T435 586V76H498Q512 67 516 60T520 38Q520 9 498 1H436Q429 1 417 1T398 0Q375 0 363 7T351 34V43L342 36Q288 -6 223 -6Q143 -6 87 58T31 216Q31 307 88 372T230 437Q292 437 342 405L351 399V535H320L289 536Q266 543 266 573ZM351 290Q347 302 337 316T302 346T244 361Q193 361 154 319T115 215Q115 152 152 111T235 70Q314 70 351 170V290Z" transform="translate(1575,0)"></path></g><g data-mml-node="mi" transform="translate(2100,0)"><path data-c="5F" d="M57 -60Q57 -33 86 -25H438Q468 -34 468 -60T438 -95H86Q57 -86 57 -60Z"></path></g><g data-mml-node="mi" transform="translate(2625,0)"><path data-c="1D695" d="M51 573Q51 602 73 610H76Q79 610 84 610T97 610T113 610T133 611T155 611T179 611H282Q301 598 304 586V76H452Q466 67 470 60T474 38Q474 10 452 1H73Q51 9 51 32V38Q51 54 54 60T73 76H220V535H146L73 536Q51 545 51 567V573Z"></path><path data-c="1D698" d="M52 216Q52 318 118 379T261 440Q343 440 407 378T472 216Q472 121 410 58T262 -6Q176 -6 114 58T52 216ZM388 225Q388 281 351 322T261 364Q213 364 175 325T136 225Q136 158 174 114T262 70T350 114T388 225Z" transform="translate(525,0)"></path><path data-c="1D68C" d="M291 -6Q196 -6 131 60T66 216Q66 296 119 361Q154 403 200 421T273 439Q275 440 293 440H313Q400 440 433 409Q454 388 454 359Q454 335 439 321T402 306Q380 306 365 321T350 357V362L340 363Q339 363 326 363T303 364Q280 364 266 362Q217 352 184 313T151 215Q151 153 199 112T313 70Q341 70 357 85T381 118T394 140Q402 146 424 146Q443 146 447 144Q466 137 466 117Q466 106 457 88T429 47T374 10T291 -6Z" transform="translate(1050,0)"></path><path data-c="1D694" d="M13 42Q13 63 23 69T69 76H102V535H69H54Q34 535 24 542T13 573Q13 588 15 593Q22 605 29 608T56 611H95Q113 611 122 611T140 610T152 609T159 607T163 603T167 597T173 589V413L174 237L295 355H275Q260 355 253 356T239 367T232 393Q232 419 243 425T304 431H359H464Q479 422 482 415T485 393Q485 364 464 356L431 355H398L293 254L427 76H486Q501 67 504 60T507 38Q507 28 507 24T501 12T486 1H314Q292 8 292 38Q292 62 308 73Q312 75 326 76L338 77L290 140Q279 154 267 171T248 196L242 204L207 171L173 139V76H206H221Q241 76 251 69T262 38Q262 11 244 3Q240 1 138 1Q123 1 100 1T70 0Q32 0 23 7T13 42Z" transform="translate(1575,0)"></path></g></g><g data-mml-node="mo" transform="translate(4725,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(5114,0)"><path data-c="1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"></path></g><g data-mml-node="mo" transform="translate(5966,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>
<ul>
<li>Los bloqueos para lectura se pueden simultanear</li>
</ul>
</li>
<li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex" xmlns="http://www.w3.org/2000/svg" width="15.566ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 6880 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D6A0" d="M54 355Q16 355 16 388V393Q16 423 37 430Q41 431 125 431H162Q206 431 218 425T230 393Q230 366 212 358Q206 355 174 355Q141 355 141 354L150 296Q181 110 181 89V84Q182 85 183 96Q185 118 199 173T218 237Q223 247 245 259H264H268Q294 259 309 240Q315 229 329 174T343 92Q343 84 344 84V86Q344 88 344 91T345 97Q347 125 356 187T374 301T383 354Q383 355 350 355H333Q314 355 304 362T294 393Q294 420 312 428Q318 431 401 431H440Q485 431 496 425T508 393Q508 382 508 377T498 363T470 355L455 354Q455 353 441 271T413 104T396 16Q384 -4 355 -4H351Q315 -4 305 9T280 79Q278 90 276 96Q265 149 265 169Q265 176 264 169Q263 166 263 162Q261 130 248 79T230 18Q220 -4 183 -4H175L151 -3Q134 5 127 17L112 102Q97 188 83 270T69 354Q62 355 54 355Z"></path><path data-c="1D69B" d="M327 76Q359 76 369 70T380 38Q380 10 359 1H47Q24 8 24 38Q24 54 28 61T47 76H145V355H96L47 356Q24 363 24 393Q24 409 28 416T47 431H207Q223 419 226 414T229 393V387V369Q297 437 394 437Q436 437 461 417T487 368Q487 347 473 332T438 317Q428 317 420 320T407 327T398 337T393 347T390 356L388 361Q348 356 324 345Q228 299 228 170Q228 161 228 151T229 138V76H293H327Z" transform="translate(525,0)"></path><path data-c="1D692" d="M202 538T202 559T218 596T260 612Q283 612 300 597T317 560Q317 538 300 523T260 507Q235 507 219 522ZM411 76Q441 76 451 69T462 38Q462 29 462 26T460 18T453 9T440 1H94Q72 8 72 33V38Q72 46 72 49T74 58T81 68T94 76H233V355H167L102 356Q80 363 80 393Q80 418 91 425T138 432Q145 432 165 432T200 431H295Q297 429 303 425T310 420T314 415T317 404T317 389T318 363Q318 354 318 314T317 241V76H378H411Z" transform="translate(1050,0)"></path><path data-c="1D69D" d="M25 395Q26 405 26 408T29 416T35 423T48 431H145V481L146 532Q154 547 161 550T184 554H189Q218 554 227 534Q229 529 229 480V431H405Q406 430 411 427T418 422T422 416T426 407T427 393Q427 387 427 382T424 374T421 368T417 363T413 360T408 358L405 356L317 355H229V249Q229 237 229 214T228 179Q228 126 241 98T295 70Q354 70 365 149Q366 167 375 174Q383 182 407 182H415Q438 182 446 166Q448 161 448 148Q448 84 398 39T282 -6Q226 -6 189 29T146 128Q145 134 145 247V355H96H72Q45 355 35 362T25 395Z" transform="translate(1575,0)"></path><path data-c="1D68E" d="M48 217Q48 295 100 361T248 439L258 440Q268 440 274 440Q329 438 369 416T428 359T456 292T464 228Q464 215 461 208T454 198T442 190L288 189H135L138 179Q153 132 199 102T303 71Q336 71 353 86T380 120T398 143Q404 146 422 146Q453 146 462 126Q464 120 464 116Q464 84 416 39T285 -6Q187 -6 118 59T48 217ZM377 264Q371 291 365 306T341 338T294 362Q288 363 264 363Q225 363 190 336T139 264H377Z" transform="translate(2100,0)"></path></g><g data-mml-node="mi" transform="translate(2625,0)"><path data-c="5F" d="M57 -60Q57 -33 86 -25H438Q468 -34 468 -60T438 -95H86Q57 -86 57 -60Z"></path></g><g data-mml-node="mi" transform="translate(3150,0)"><path data-c="1D695" d="M51 573Q51 602 73 610H76Q79 610 84 610T97 610T113 610T133 611T155 611T179 611H282Q301 598 304 586V76H452Q466 67 470 60T474 38Q474 10 452 1H73Q51 9 51 32V38Q51 54 54 60T73 76H220V535H146L73 536Q51 545 51 567V573Z"></path><path data-c="1D698" d="M52 216Q52 318 118 379T261 440Q343 440 407 378T472 216Q472 121 410 58T262 -6Q176 -6 114 58T52 216ZM388 225Q388 281 351 322T261 364Q213 364 175 325T136 225Q136 158 174 114T262 70T350 114T388 225Z" transform="translate(525,0)"></path><path data-c="1D68C" d="M291 -6Q196 -6 131 60T66 216Q66 296 119 361Q154 403 200 421T273 439Q275 440 293 440H313Q400 440 433 409Q454 388 454 359Q454 335 439 321T402 306Q380 306 365 321T350 357V362L340 363Q339 363 326 363T303 364Q280 364 266 362Q217 352 184 313T151 215Q151 153 199 112T313 70Q341 70 357 85T381 118T394 140Q402 146 424 146Q443 146 447 144Q466 137 466 117Q466 106 457 88T429 47T374 10T291 -6Z" transform="translate(1050,0)"></path><path data-c="1D694" d="M13 42Q13 63 23 69T69 76H102V535H69H54Q34 535 24 542T13 573Q13 588 15 593Q22 605 29 608T56 611H95Q113 611 122 611T140 610T152 609T159 607T163 603T167 597T173 589V413L174 237L295 355H275Q260 355 253 356T239 367T232 393Q232 419 243 425T304 431H359H464Q479 422 482 415T485 393Q485 364 464 356L431 355H398L293 254L427 76H486Q501 67 504 60T507 38Q507 28 507 24T501 12T486 1H314Q292 8 292 38Q292 62 308 73Q312 75 326 76L338 77L290 140Q279 154 267 171T248 196L242 204L207 171L173 139V76H206H221Q241 76 251 69T262 38Q262 11 244 3Q240 1 138 1Q123 1 100 1T70 0Q32 0 23 7T13 42Z" transform="translate(1575,0)"></path></g></g><g data-mml-node="mo" transform="translate(5250,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(5639,0)"><path data-c="1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"></path></g><g data-mml-node="mo" transform="translate(6491,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>
<ul>
<li>El bloqueo para escritura es restrictivo</li>
</ul>
</li>
<li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex" xmlns="http://www.w3.org/2000/svg" width="10.814ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 4780 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D69E" d="M4 393Q4 416 15 423T52 431H90Q141 431 151 429T168 417Q171 412 173 409V254L174 100Q182 70 244 70Q320 70 344 119Q349 130 350 144T351 248V355H320L289 356Q266 363 266 393Q266 408 270 415T289 431H351H386Q409 431 418 428T433 411Q435 406 435 241V76H498Q512 67 516 60T520 38Q520 9 498 1H436H394Q372 1 364 5T351 26L342 21Q293 -5 227 -5Q118 -5 96 67Q91 82 90 101T89 227V355H58L27 356Q4 363 4 393Z"></path><path data-c="1D697" d="M89 431Q94 431 105 431T122 432Q173 432 173 399Q173 394 175 394Q176 394 190 404T233 425T298 436Q343 436 371 423Q411 402 423 365T436 265Q436 257 436 239T435 211V198V76H498Q512 67 516 60T520 38Q520 9 498 1H308Q286 9 286 32V38V45Q286 65 303 73Q309 76 329 76H351V188Q351 204 351 230T352 266Q352 321 341 341T288 361Q253 361 222 341T176 274L174 264L173 170V76H236Q250 67 254 60T258 38Q258 9 236 1H27Q4 8 4 38Q4 53 8 60T27 76H89V355H58L27 356Q4 363 4 393Q4 408 8 415T27 431H89Z" transform="translate(525,0)"></path><path data-c="1D695" d="M51 573Q51 602 73 610H76Q79 610 84 610T97 610T113 610T133 611T155 611T179 611H282Q301 598 304 586V76H452Q466 67 470 60T474 38Q474 10 452 1H73Q51 9 51 32V38Q51 54 54 60T73 76H220V535H146L73 536Q51 545 51 567V573Z" transform="translate(1050,0)"></path><path data-c="1D698" d="M52 216Q52 318 118 379T261 440Q343 440 407 378T472 216Q472 121 410 58T262 -6Q176 -6 114 58T52 216ZM388 225Q388 281 351 322T261 364Q213 364 175 325T136 225Q136 158 174 114T262 70T350 114T388 225Z" transform="translate(1575,0)"></path><path data-c="1D68C" d="M291 -6Q196 -6 131 60T66 216Q66 296 119 361Q154 403 200 421T273 439Q275 440 293 440H313Q400 440 433 409Q454 388 454 359Q454 335 439 321T402 306Q380 306 365 321T350 357V362L340 363Q339 363 326 363T303 364Q280 364 266 362Q217 352 184 313T151 215Q151 153 199 112T313 70Q341 70 357 85T381 118T394 140Q402 146 424 146Q443 146 447 144Q466 137 466 117Q466 106 457 88T429 47T374 10T291 -6Z" transform="translate(2100,0)"></path><path data-c="1D694" d="M13 42Q13 63 23 69T69 76H102V535H69H54Q34 535 24 542T13 573Q13 588 15 593Q22 605 29 608T56 611H95Q113 611 122 611T140 610T152 609T159 607T163 603T167 597T173 589V413L174 237L295 355H275Q260 355 253 356T239 367T232 393Q232 419 243 425T304 431H359H464Q479 422 482 415T485 393Q485 364 464 356L431 355H398L293 254L427 76H486Q501 67 504 60T507 38Q507 28 507 24T501 12T486 1H314Q292 8 292 38Q292 62 308 73Q312 75 326 76L338 77L290 140Q279 154 267 171T248 196L242 204L207 171L173 139V76H206H221Q241 76 251 69T262 38Q262 11 244 3Q240 1 138 1Q123 1 100 1T70 0Q32 0 23 7T13 42Z" transform="translate(2625,0)"></path></g></g><g data-mml-node="mo" transform="translate(3150,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(3539,0)"><path data-c="1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"></path></g><g data-mml-node="mo" transform="translate(4391,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>
<ul>
<li>El desbloqueo de un objeto depende del tipo de bloqueo que tiene</li>
</ul>
</li>
</ul>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="26" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="26" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Bloqueo para lectura</h1>
<p><img src="img/t5/read_lock.png" alt="center" /></p>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="27" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="27" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Bloqueo para escritura</h1>
<p><img src="img/t5/write_lock.png" alt="center" /></p>
<ul>
<li>Si el objeto está desbloqueado, se bloquea el mismo para escritura</li>
<li>Si el objeto está bloqueado, se espera a que quede libre antes de bloquearlo para escritura</li>
</ul>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="28" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="28" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Desbloqueo</h1>
<p><img src="img/t5/unlock.png" alt="center" /></p>
<ul>
<li>Si el bloqueo era por <strong>lectura</strong>, se decrementa en 1 el número de lecturas</li>
<li>Si el número de lecturas <strong>llega a 0</strong>, se establece que el objeto queda desbloqueado y se notifica a los bloqueos que esperan</li>
<li>Si el bloqueo era por <strong>escritura</strong>, se desbloquea el objeto y se notifica a los bloqueos que estaban esperando</li>
</ul>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="29" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="29" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Bloqueo en dos fases</h1>
<p>Para garantizar la ejecución en serie de las transacciones se realiza un<br />
<strong>bloqueo en dos fases</strong>:</p>
<ul>
<li><em>Fase de crecimiento</em>: se realizan todos los bloqueos de los objetos que se vayan a utilizar en la transacción</li>
<li><em>Fase de liberación</em>: se liberan aquellos bloqueos solicitados durante la fase anterior.</li>
</ul>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="30" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="30" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Bloqueo pesimista y optimista</h1>
<p>Bloqueo pesimista:</p>
<ul>
<li>Transacciones completamente separadas</li>
<li>Serializable (nivel de aislamiento)</li>
<li>Problema: Interbloqueo (prevención por grafos)</li>
</ul>
<p>Bloqueo optimista:</p>
<ul>
<li>Asume que no habrá errores</li>
<li>Cuando se modifican los datos, se vuelven a leer y si hay modificaciones se produce un error</li>
<li>El programa debe solucionarlo</li>
</ul>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="31" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="31" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Niveles de aislamiento</h1>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-keyword">SET</span> [{<span class="hljs-keyword">GLOBAL</span> <span class="hljs-operator">|</span> SESSION}] TRANSACTION {ISOLATION LEVEL nivel <span class="hljs-operator">|</span> {READ WRITE <span class="hljs-operator">|</span> READ <span class="hljs-keyword">ONLY</span>}}
</span></span></foreignObject></svg></code></pre>
<p>Parámetros:</p>
<ul>
<li><code>GLOBAL|SESSION</code>: Se aplica a todas las sesiones o a la actual, respectivamente</li>
</ul>
<p>Niveles:</p>
<ul>
<li><code>REPEATABLE READ</code> (<strong>por defecto</strong>): Dentro de una misma transacción las lecturas se realizan sobre el conjunto inicial de datos (no bloquea)</li>
<li><code>READ COMMITTED</code>: Cada lectura establece su propio conjunto de datos incluso dentro de la misma transacción (no bloquea)</li>
<li><code>READ UNCOMMITTED</code>: Permite <em>lecturas sucias</em></li>
<li><code>SERIALIZABLE</code>: Bloqueo compartido solo para lectura con otras sesiones</li>
</ul>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="32" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-class="section" data-theme="bbdd" class="section" data-marpit-pagination="32" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--class:section;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>PROCEDIMIENTOS ALMACENADOS</h1>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="33" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="33" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Procedimiento almacenado</h1>
<p>Subrutina que se almacena en una base de datos</p>
<ul>
<li>Similar a un subprograma en cualquier otro lenguaje de programación</li>
<li>Cuenta con un <strong>nombre</strong>, una <strong>lista de parámetros</strong> y <strong>sentencias SQL</strong></li>
<li>Ventajas:
<ul>
<li><strong>Rápidos</strong>: El SGBD puede aprovechar hasta la caché y además posibilita evitar tráfico de red</li>
<li><strong>Portables</strong>: Son fácilmente migrables entre servidores</li>
<li><strong>Fuentes disponibles</strong>: Accesible desde la propia base de datos</li>
</ul>
</li>
</ul>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="34" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="34" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Creación de un procedimiento</h1>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> nombre_procedimiento ([param [,...]])
<span class="hljs-keyword">BEGIN</span>
  cuerpo_procedimiento
<span class="hljs-keyword">END</span>
</span></span></foreignObject></svg></code></pre>
<p>Los parámetros `param`` tienen la siguiente sintaxis:</p>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>[ <span class="hljs-keyword">IN</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">OUT</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">INOUT</span> ] nombre_parametro tipo_parametro
</span></span></foreignObject></svg></code></pre>
<p>El cuerpo estará formado por <strong>sentencias SQL válidas</strong></p>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="35" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="35" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Procedimientos: ejemplo (I)</h1>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>DELIMITER $$
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> sp_conductores ()
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> conductores;
<span class="hljs-keyword">END</span>$$
DELIMITER ;
</span></span></foreignObject></svg></code></pre>
<p><strong>Importante</strong>: Cambiar el delimitador de fin de línea por defecto de SQL</p>
<ul>
<li>Así se evita que el <code>;</code> dentro del procedimiento se interprete como<br />
fin del mismo</li>
<li>Para ello usamos el operador <code>DELIMITER</code>.</li>
</ul>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="36" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="36" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Procedimientos: ejemplo (y II)</h1>
<p><img src="img/t5/proc_ejemplo.png" alt="center" style="height:500px;" /></p>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="37" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="37" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Parámetros del procedimiento</h1>
<p>Los parámetros de un procedimiento pueden sertres tipos</p>
<ul>
<li><code>IN</code> (por defecto): El procedimiento puede modificar el valor, pero la modificación no es visible para el invocador cuando el procedimiento acaba</li>
<li><code>OUT</code>: Su valor inicial es NULL dentro del procedimiento, y su valor es visible para el invocador cuando el procedimiento acaba</li>
<li><code>INOUT</code>: El parámetro se inicializa en la llamada, puede ser modificado por el procedimiento, y cualquier cambio hecho por el procedimiento es visible tras la ejecución</li>
</ul>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="38" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="38" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Ejemplo: parámetro de entrada (I)</h1>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>DELIMITER $$
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> sp_trabajos (<span class="hljs-keyword">IN</span> conductor <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">3</span>))
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span>
    <span class="hljs-keyword">FROM</span> trabajos
    <span class="hljs-keyword">WHERE</span> codC <span class="hljs-operator">=</span> conductor;
<span class="hljs-keyword">END</span>$$
DELIMITER ;

<span class="hljs-keyword">CALL</span> sp_trabajos(<span class="hljs-string">&#x27;C03&#x27;</span>)
</span></span></foreignObject></svg></code></pre>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="39" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="39" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Ejemplo: parámetro de entrada (y II)</h1>
<p><img src="img/t5/param_in.png" alt="center" style="height:500px;" /></p>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="40" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="40" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Ejemplo: parámetro de salida (I)</h1>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>DELIMITER $$
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> sp_cuenta (<span class="hljs-keyword">IN</span> conductor <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">3</span>),
                            <span class="hljs-keyword">OUT</span> num_trabajos <span class="hljs-type">INTEGER</span>)
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">INTO</span> num_trabajos
    <span class="hljs-keyword">FROM</span> trabajos
    <span class="hljs-keyword">WHERE</span> codC <span class="hljs-operator">=</span> conductor;
<span class="hljs-keyword">END</span>$$
DELIMITER ;

<span class="hljs-keyword">CALL</span> sp_cuenta(<span class="hljs-string">&#x27;C03&#x27;</span>, <span class="hljs-variable">@cuenta</span>);

<span class="hljs-keyword">SELECT</span> <span class="hljs-variable">@cuenta</span>;
</span></span></foreignObject></svg></code></pre>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="41" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="41" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Ejemplo: parámetro de salida (y II)</h1>
<p><img src="img/t5/param_out.png" alt="center" style="height:500px;" /></p>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="42" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="42" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Ejemplo: parámetro de entrada/salida (I)</h1>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>DELIMITER $$
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> sp_suma (<span class="hljs-keyword">INOUT</span> inicial <span class="hljs-type">INTEGER</span>,
                          <span class="hljs-keyword">IN</span> cantidad <span class="hljs-type">INTEGER</span>)
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">SET</span> inicial <span class="hljs-operator">=</span> inicial <span class="hljs-operator">+</span> cantidad;
<span class="hljs-keyword">END</span>$$
DELIMITER ;

<span class="hljs-keyword">SET</span> <span class="hljs-variable">@num</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;
<span class="hljs-keyword">CALL</span> sp_suma(<span class="hljs-variable">@num</span>, <span class="hljs-number">3</span>);
<span class="hljs-keyword">SELECT</span> <span class="hljs-variable">@num</span>;
</span></span></foreignObject></svg></code></pre>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="43" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="43" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Ejemplo: parámetro de entrada/salida (y II)</h1>
<p><img src="img/t5/param_inout.png" alt="center" style="height:500px;" /></p>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="44" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="44" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Variables y variables de usuario</h1>
<p>Ya hemos visto cómo se declaran variables de usuario: anteponiendo una <code>@</code> delante del nombre</p>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-keyword">SET</span> <span class="hljs-variable">@miVar</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>; <span class="hljs-comment">-- Asignar valor</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-variable">@miVar</span>;   <span class="hljs-comment">-- Consultar valor</span>
</span></span></foreignObject></svg></code></pre>
<p>Se pueden declarar variables locales en los procedimientos usando <code>DECLARE</code></p>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-keyword">DECLARE</span> nombre_variable [,...] tipo [<span class="hljs-keyword">DEFAULT</span> valor]
</span></span></foreignObject></svg></code></pre>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="45" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="45" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Ejemplo: variables locales</h1>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>DELIMITER $$
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> sp_division ()
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">DECLARE</span> num_maquinas <span class="hljs-type">INTEGER</span>;
    <span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(codM) <span class="hljs-keyword">INTO</span> num_maquinas
    <span class="hljs-keyword">FROM</span> maquinas;

    <span class="hljs-keyword">SELECT</span> codP
    <span class="hljs-keyword">FROM</span> trabajos
    <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> codP
    <span class="hljs-keyword">HAVING</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-keyword">distinct</span> codM) <span class="hljs-operator">=</span> num_maquinas;
<span class="hljs-keyword">END</span>$$
DELIMITER ;
</span></span></foreignObject></svg></code></pre>
<p>Si hay <strong>varias consultas</strong> en el cuerpo de un procedimiento, se devuelve <strong>el último resultado</strong></p>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="46" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="46" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Sentencias de control de flujo</h1>
<p>SQL soporta varias sentencias para controlar el flujo de ejecución de los procedimientos:</p>
<ul>
<li><code>IF</code></li>
<li><code>CASE</code></li>
<li><code>ITERATE</code></li>
<li><code>LEAVE</code></li>
<li><code>LOOP</code></li>
<li><code>WHILE</code></li>
<li><code>REPEAT</code></li>
</ul>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="47" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="47" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Sentencia <code>IF</code></h1>
<p>Evalúa condición y ejecuta las sentencias correspondientes</p>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>IF condicion <span class="hljs-keyword">THEN</span> sentencias
[[ELSEIF condicion <span class="hljs-keyword">THEN</span> sentencias] ...]
[<span class="hljs-keyword">ELSE</span> sentencias]  
<span class="hljs-keyword">END</span> IF
</span></span></foreignObject></svg></code></pre>
<p>Se pueden encadenar condiciones con <code>ELSEIF</code>.</p>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="48" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="48" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Sentencia <code>CASE</code> (I)</h1>
<p>Evalúa la expresión y ejecuta las sentencias acorde al resultado obtenido</p>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-keyword">CASE</span> variable_a_evaluar
<span class="hljs-keyword">WHEN</span> valor1 <span class="hljs-keyword">THEN</span> sentencias
[...]
<span class="hljs-keyword">WHEN</span> valorN <span class="hljs-keyword">THEN</span> sentencias
[<span class="hljs-keyword">ELSE</span> setencias]
<span class="hljs-keyword">END</span> <span class="hljs-keyword">CASE</span>
</span></span></foreignObject></svg></code></pre>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="49" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="49" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Sentencia <code>CASE</code> (y II)</h1>
<p>Alternativa: Comprueba condiciones en lugar de valores</p>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-keyword">CASE</span>
<span class="hljs-keyword">WHEN</span> condicion <span class="hljs-keyword">THEN</span> sentencias
[...]
[<span class="hljs-keyword">ELSE</span> sentencias]
<span class="hljs-keyword">END</span> <span class="hljs-keyword">CASE</span>
</span></span></foreignObject></svg></code></pre>
<p>Una vez encuentra una verdadera, ejecuta las sentencias y sale del <code>CASE</code></p>
<ul>
<li>En caso contrario se ejecuta el fragmento del <code>ELSE</code>.</li>
</ul>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="50" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="50" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Bucle <code>LOOP</code></h1>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>etiqueta_inicio_loop: LOOP
sentencias
IF condicion <span class="hljs-keyword">THEN</span>
  LEAVE etiqueta_inicio_loop;
<span class="hljs-keyword">END</span> IF;
<span class="hljs-keyword">END</span> LOOP;
[etiqueta_fin_loop]
</span></span></foreignObject></svg></code></pre>
<p>Se ejecutan las sentencias <strong>hasta abandonar el bucle con <code>LEAVE</code></strong></p>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="51" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="51" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Ejemplo: bucle <code>LOOP</code></h1>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>DELIMITER $$
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> my_proc_LOOP (<span class="hljs-keyword">IN</span> num <span class="hljs-type">INTEGER</span>)
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">DECLARE</span> x <span class="hljs-type">INT</span>;
    <span class="hljs-keyword">SET</span> x <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    loop_label: LOOP
        <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> number <span class="hljs-keyword">VALUES</span> (rand());
        <span class="hljs-keyword">SET</span> x <span class="hljs-operator">=</span> x <span class="hljs-operator">+</span> <span class="hljs-number">1</span>;
        IF x <span class="hljs-operator">&gt;=</span> num <span class="hljs-keyword">THEN</span>
            LEAVE loop_label;
        <span class="hljs-keyword">END</span> IF;
    <span class="hljs-keyword">END</span> LOOP;
<span class="hljs-keyword">END</span>$$
DELIMITER ;
</span></span></foreignObject></svg></code></pre>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="52" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="52" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Bucle <code>REPEAT</code></h1>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>[etiqueta_inicio:]REPEAT
    sentecias
UNTIL condicion
<span class="hljs-keyword">END</span> REPEAT
[etiqueta_fin]
</span></span></foreignObject></svg></code></pre>
<p>Las sentencias se repiten hasta que la condición se cumpla</p>
<ul>
<li>Ambas etiquetas son opcionales en este tipo de bucle</li>
</ul>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="53" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="53" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Ejemplo: bucle <code>REPEAT</code></h1>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>DELIMITER $$
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> my_proc_REPEAT (<span class="hljs-keyword">IN</span> n <span class="hljs-type">INTEGER</span>)
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">SET</span> <span class="hljs-variable">@sum</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">SET</span> <span class="hljs-variable">@x</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;  
    REPEAT
        IF <span class="hljs-built_in">mod</span>(<span class="hljs-variable">@x</span>, <span class="hljs-number">2</span>) <span class="hljs-operator">=</span> <span class="hljs-number">0</span> <span class="hljs-keyword">THEN</span>
            <span class="hljs-keyword">SET</span> <span class="hljs-variable">@sum</span> <span class="hljs-operator">=</span> <span class="hljs-variable">@sum</span> <span class="hljs-operator">+</span> <span class="hljs-variable">@x</span>;
        <span class="hljs-keyword">END</span> IF;
        <span class="hljs-keyword">SET</span> <span class="hljs-variable">@x</span> <span class="hljs-operator">=</span> <span class="hljs-variable">@x</span> <span class="hljs-operator">+</span> <span class="hljs-number">1</span>;
    UNTIL <span class="hljs-variable">@x</span> <span class="hljs-operator">&gt;</span> n
    <span class="hljs-keyword">END</span> REPEAT;
<span class="hljs-keyword">END</span> $$
DELIMITER ;
</span></span></foreignObject></svg></code></pre>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="54" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="54" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Bucle <code>WHILE</code></h1>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>[etiqueta_inicio:]WHILE condicion DO
    setencias
<span class="hljs-keyword">END</span> WHILE
[etiqueta_fin]
</span></span></foreignObject></svg></code></pre>
<p>Se ejecutan las instrucciones mientras se cumple la condición</p>
<ul>
<li>Similar al <code>REPEAT</code> pero con la condición de parada invertida</li>
</ul>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="55" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="55" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Ejemplo: bucle <code>WHILE</code></h1>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>DELIMITER $$
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> my_proc_WHILE (<span class="hljs-keyword">IN</span> n <span class="hljs-type">INTEGER</span>)
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">SET</span> <span class="hljs-variable">@sum</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">SET</span> <span class="hljs-variable">@x</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
    WHILE <span class="hljs-variable">@x</span><span class="hljs-operator">&lt;=</span>n DO
        IF <span class="hljs-built_in">mod</span>(<span class="hljs-variable">@x</span>, <span class="hljs-number">2</span>) <span class="hljs-operator">&lt;&gt;</span> <span class="hljs-number">0</span> <span class="hljs-keyword">THEN</span>
            <span class="hljs-keyword">SET</span> <span class="hljs-variable">@sum</span> <span class="hljs-operator">=</span> <span class="hljs-variable">@sum</span> <span class="hljs-operator">+</span> <span class="hljs-variable">@x</span>;
        <span class="hljs-keyword">END</span> IF;
        <span class="hljs-keyword">SET</span> <span class="hljs-variable">@x</span> <span class="hljs-operator">=</span> <span class="hljs-variable">@x</span> <span class="hljs-operator">+</span> <span class="hljs-number">1</span>;
    <span class="hljs-keyword">END</span> WHILE;
<span class="hljs-keyword">END</span>$$
DELIMITER ;
</span></span></foreignObject></svg></code></pre>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="56" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-class="section" data-theme="bbdd" class="section" data-marpit-pagination="56" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--class:section;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>FUNCIONES ALMACENADAS</h1>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="57" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="57" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Funciones almacenadas</h1>
<p>Al igual que con los procedimientos, MySQL admite funciones almacenadas.</p>
<ul>
<li>Son subrutinas que se almacenan en la base de datos pero que devuelven un valor cuando son ejecutadas.</li>
<li>Por ello, se pueden usar como expresiones en cualquier consulta, condición, etc.</li>
</ul>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="58" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="58" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Sintaxis de creación de funciones</h1>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>DELIMITER $$
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">FUNCTION</span> function_name(
    param1,
    param2, …
)
<span class="hljs-keyword">RETURNS</span> datatype
<span class="hljs-keyword">DETERMINISTIC</span>
<span class="hljs-keyword">BEGIN</span>
    statements;
    <span class="hljs-keyword">RETURN</span> (<span class="hljs-keyword">value</span>);
<span class="hljs-keyword">END</span> $$
DELIMITER ;
</span></span></foreignObject></svg></code></pre>
<p>Es necesario especificar <code>DETERMINISTIC</code> (determinista) para que el optimizador del SGBD haga su trabajo correctamente</p>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="59" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="59" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Ejemplo: función (I)</h1>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>DELIMITER $$
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">FUNCTION</span> sf_masiva(cantidad <span class="hljs-type">DECIMAL</span>)
<span class="hljs-keyword">RETURNS</span> <span class="hljs-type">DECIMAL</span>
<span class="hljs-keyword">DETERMINISTIC</span>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">DECLARE</span> cmasiva <span class="hljs-type">DECIMAL</span>;
    <span class="hljs-keyword">SET</span> cmasiva <span class="hljs-operator">=</span> cantidad <span class="hljs-operator">*</span> <span class="hljs-number">1.21</span>;
    <span class="hljs-keyword">RETURN</span> (cmasiva);
<span class="hljs-keyword">END</span>$$
DELIMITER ;
</span></span></foreignObject></svg></code></pre>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="60" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="60" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Ejemplo: función (y II)</h1>
<p><img src="img/t5/funcion.png" alt="center" style="height:500px;" /></p>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="61" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-class="section" data-theme="bbdd" class="section" data-marpit-pagination="61" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--class:section;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>CURSORES</h1>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="62" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="62" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Cursor</h1>
<p>Estructura de control para recorrer secuencialmente los resultados de una consulta</p>
<ul>
<li>En otras palabras, es un iterador sobre las filas resultantes de una consulta</li>
<li>Se suelen utilizar en subrutinas almacenadas en la base de datos, como procedimientos y funciones</li>
</ul>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="63" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="63" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Operaciones con cursores</h1>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> curdemo()
<span class="hljs-keyword">BEGIN</span>
  <span class="hljs-keyword">DECLARE</span> done <span class="hljs-type">INT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">FALSE</span>;
  <span class="hljs-keyword">DECLARE</span> b, c <span class="hljs-type">INT</span>;
  <span class="hljs-keyword">DECLARE</span> cur1 <span class="hljs-keyword">CURSOR</span> <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">SELECT</span> id, data <span class="hljs-keyword">FROM</span> t1; <span class="hljs-comment">-- Creación</span>
  <span class="hljs-keyword">DECLARE</span> CONTINUE HANDLER <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">NOT</span> FOUND <span class="hljs-keyword">SET</span> done <span class="hljs-operator">=</span> <span class="hljs-literal">TRUE</span>;
   <span class="hljs-keyword">OPEN</span> cur1; <span class="hljs-comment">-- Apertura</span>
   read_loop: LOOP
    <span class="hljs-keyword">FETCH</span> cur1 <span class="hljs-keyword">INTO</span> b, c; <span class="hljs-comment">-- Uso</span>
    IF done <span class="hljs-keyword">THEN</span>
      LEAVE read_loop;
    <span class="hljs-keyword">END</span> IF;
  <span class="hljs-keyword">END</span> LOOP;
  <span class="hljs-keyword">CLOSE</span> cur1; <span class="hljs-comment">-- Cierre</span>
<span class="hljs-keyword">END</span>;
</span></span></foreignObject></svg></code></pre>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="64" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="64" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Cursores: detalles importantes</h1>
<p>El número (y tipos) de variables donde almacenar el resultado de <code>FETCH</code> se corresponde con el número (tipo) de columnas devueltas por la consulta que alimenta el cursor:</p>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-keyword">DECLARE</span> cur1 <span class="hljs-keyword">CURSOR</span> <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">SELECT</span> id,data <span class="hljs-keyword">FROM</span> t1;
<span class="hljs-keyword">FETCH</span> cur1 <span class="hljs-keyword">INTO</span> b, c;
</span></span></foreignObject></svg></code></pre>
<p>Hay que declarar un manejador especial para cuando se alcance el final del cursor en un <code>FETCH</code>:</p>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-keyword">DECLARE</span> CONTINUE HANDLER <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">NOT</span> FOUND sentencias;
</span></span></foreignObject></svg></code></pre>
<p><strong>No olvidar</strong>: Los cursores <strong>se abren antes de su uso</strong> y <strong>se cierran al acabar</strong>.</p>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="65" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-class="section" data-theme="bbdd" class="section" data-marpit-pagination="65" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--class:section;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>TRIGGERS</h1>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="66" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="66" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>¿Por qué?</h1>
<p>En ocasiones es necesario comprobar una serie de restricciones en los datos de manera periódica</p>
<ul>
<li>Una posible solución es realizar una comprobación <em>activa</em>, consultando periódicamente a la base de datos</li>
<li>Otra solución más eficiente pasaría por utilizar un sistema basado en eventos y realizar la comprobación cuando se dispare</li>
</ul>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="67" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="67" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>¿Qué eventos suceden en una BBDD?</h1>
<p>Durante el uso de una BBDD, pueden ocurrir diferentes eventos que requieran volver a comprobar las restricciones de las que hablábamos</p>
<ul>
<li>Se insertan nuevas filas en una tabla</li>
<li>Se modifica el valor de algún atributo de una o varias filas</li>
<li>Se eliminan filas de alguna tabla</li>
</ul>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="68" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="68" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Caso de estudio</h1>
<p>Una empresa quiere garantizar que un empleado nunca gane más dinero que su supervisor</p>
<p>Se plantea programar una consulta que obtenga los salarios de empleados y supervisores directos</p>
<p>¿Se te ocurre una manera mejor?</p>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="69" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="69" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Modelo basado en eventos</h1>
<p><img src="img/t5/eventos.png" alt="center" style="height:500px;" /></p>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="70" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="70" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Composición de un Trigger</h1>
<p><img src="img/t5/trigger.png" alt="center" style="height:500px;" /></p>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="71" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="71" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>SQL Trigger</h1>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>DELIMITER <span class="hljs-operator">/</span><span class="hljs-operator">/</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TRIGGER</span> upd_check BEFORE UPDATE <span class="hljs-keyword">ON</span> account
<span class="hljs-keyword">FOR</span> <span class="hljs-keyword">EACH</span> <span class="hljs-type">ROW</span>
<span class="hljs-keyword">BEGIN</span>
    IF NEW.amount <span class="hljs-operator">&lt;</span> <span class="hljs-number">0</span> <span class="hljs-keyword">THEN</span>
        <span class="hljs-keyword">SET</span> NEW.amount <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    ELSEIF NEW.amount <span class="hljs-operator">&gt;</span> <span class="hljs-number">100</span> <span class="hljs-keyword">THEN</span>
        <span class="hljs-keyword">SET</span> NEW.amount <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;
    <span class="hljs-keyword">END</span> IF;
<span class="hljs-keyword">END</span><span class="hljs-operator">/</span><span class="hljs-operator">/</span>
DELIMITER ;
</span></span></foreignObject></svg></code></pre>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="72" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="72" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Eventos <code>BEFORE</code>y <code>AFTER</code></h1>
<p>Los eventos <code>BEFORE</code> se ejecutan antes de que se lleve a cabo el evento en cuestión:</p>
<ul>
<li><code>BEFORE INSERT</code></li>
<li><code>BEFORE UPDATE</code></li>
<li><code>BEFORE DELETE</code></li>
</ul>
<p>Los eventos <code>AFTER</code> se ejecutan una vez se ha producido el evento:</p>
<ul>
<li><code>AFTER INSERT</code></li>
<li><code>AFTER UPDATE</code></li>
<li><code>AFTER DELETE</code></li>
</ul>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="73" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="73" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Variables <code>NEW</code> y <code>OLD</code> (I)</h1>
<p>Una característica interesante de los triggers son las variables <code>NEW</code> y <code>OLD</code></p>
<ul>
<li><code>NEW.columna</code> es el nuevo valor que se le va a asignar a la columna en cuestión (para eventos <code>UPDATE</code> e <code>INSERT</code>)</li>
<li><code>OLD.columna</code> es el valor que tenía la columna en cuestión que se modifica (para eventos <code>UPDATE</code> y <code>DELETE</code>)</li>
</ul>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="74" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="74" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Variables <code>NEW</code> y <code>OLD</code> (y II)</h1>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>DELIMITER <span class="hljs-operator">/</span><span class="hljs-operator">/</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TRIGGER</span> t1 BEFORE UPDATE <span class="hljs-keyword">ON</span> account
<span class="hljs-keyword">FOR</span> <span class="hljs-keyword">EACH</span> <span class="hljs-type">ROW</span>
<span class="hljs-keyword">BEGIN</span>
    IF NEW.amount <span class="hljs-operator">&lt;</span> <span class="hljs-number">0</span> <span class="hljs-keyword">THEN</span>
        <span class="hljs-keyword">SET</span> NEW.amount <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    ELSEIF NEW.amount <span class="hljs-operator">&gt;</span> <span class="hljs-number">100</span> <span class="hljs-keyword">THEN</span>
        <span class="hljs-keyword">SET</span> NEW.amount <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;
    <span class="hljs-keyword">END</span> IF;
<span class="hljs-keyword">END</span><span class="hljs-operator">/</span><span class="hljs-operator">/</span>
DELIMITER ;
</span></span></foreignObject></svg></code></pre>
<ul>
<li>Se pueden modificar las variables <code>NEW</code> para cambiar los valores a insertar/modificar en base a unas condiciones</li>
<li>Las variables <code>OLD</code> solo se pueden leer</li>
</ul>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="75" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="75" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Orden de ejecución de los Triggers</h1>
<ul>
<li>Se pueden definir varios triggers sobre el mismo evento y objeto.</li>
<li>Es posible especificar el orden de ejecución en el momento de creación del trigger</li>
</ul>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TRIGGER</span> ins_transaction BEFORE <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">ON</span> account
<span class="hljs-keyword">FOR</span> <span class="hljs-keyword">EACH</span> <span class="hljs-type">ROW</span> <span class="hljs-keyword">PRECEDES</span> ins_sum
...

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TRIGGER</span> ins_ttt BEFORE <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">ON</span> account
<span class="hljs-keyword">FOR</span> <span class="hljs-keyword">EACH</span> <span class="hljs-type">ROW</span> FOLLOWS ins_transaction
...
</span></span></foreignObject></svg></code></pre>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="76" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="76" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Algunos ejemplos (I)</h1>
<p>Forzar el cumplimiento de una determinada restricción:</p>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>DELIMITER $$
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TRIGGER</span> no_futuro
BEFORE <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">ON</span> alumno
<span class="hljs-keyword">FOR</span> <span class="hljs-keyword">EACH</span> <span class="hljs-type">ROW</span>
<span class="hljs-keyword">BEGIN</span>
  IF NEW.fecha_nac <span class="hljs-operator">&gt;</span> <span class="hljs-built_in">CURRENT_DATE</span>()
  <span class="hljs-keyword">THEN</span>
   SIGNAL <span class="hljs-keyword">SQLSTATE</span> <span class="hljs-string">&#x27;02000&#x27;</span>
   <span class="hljs-keyword">SET</span> MESSAGE_TEXT <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;Error: no aceptamos alumnos del futuro&#x27;</span>;
  <span class="hljs-keyword">END</span> IF;
<span class="hljs-keyword">END</span>$$
DELIMITER ;
</span></span></foreignObject></svg></code></pre>
<p>Presta atención a la forma de lanzar una excepción en MYSQL</p>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="77" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="77" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Algunos ejemplos (II)</h1>
<p>Corregir valores inusuales o fuera de rango en consultas de inserción y/o modificación:</p>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>DELIMITER $$
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TRIGGER</span> trigg1
BEFORE UPDATE <span class="hljs-keyword">ON</span> usuario
<span class="hljs-keyword">FOR</span> <span class="hljs-keyword">EACH</span> <span class="hljs-type">ROW</span>
<span class="hljs-keyword">BEGIN</span>
  IF NEW.edad <span class="hljs-operator">&lt;</span> <span class="hljs-number">0</span> <span class="hljs-keyword">THEN</span>
   <span class="hljs-keyword">SET</span> NEW.edad <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
  <span class="hljs-keyword">END</span> IF;
<span class="hljs-keyword">END</span>$$
DELIMITER ;
</span></span></foreignObject></svg></code></pre>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="78" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="78" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Algunos ejemplos (y III)</h1>
<p>Llevar un registro de los elementos que se borran en la base de datos:</p>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>DELIMITER $$
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TRIGGER</span> trigg1
AFTER <span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">ON</span> tabla
<span class="hljs-keyword">FOR</span> <span class="hljs-keyword">EACH</span> <span class="hljs-type">ROW</span>
<span class="hljs-keyword">BEGIN</span>
  <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> deletelog (usuario, idborrado, fecha)
  <span class="hljs-keyword">VALUES</span> (<span class="hljs-keyword">USER</span>(), OLD.id, NOW());
<span class="hljs-keyword">END</span>$$
DELIMITER ;
</span></span></foreignObject></svg></code></pre>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="79" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-class="section" data-theme="bbdd" class="section" data-marpit-pagination="79" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--class:section;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>ÍNDICES</h1>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="80" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="80" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>¿Qué es un índice?</h1>
<p>Permite que una consulta recupere eficientemente los datos de una base de datos</p>
<ul>
<li>Los índices están relacionados con tablas específicas y constan de una o más claves</li>
<li>Una tabla puede tener más de un índice construido a partir de ella</li>
<li>Las claves se basan en las columnas de las tablas</li>
<li>Sin un índice, MySQL debe comenzar con la primera fila y luego leer toda la tabla para encontrar las filas relevantes</li>
</ul>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="81" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="81" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Usos de los índices</h1>
<p>MySQL usa los índices para:</p>
<ul>
<li>Encontrar las filas que cumplen la condición de un <code>WHERE</code> de manera rápida</li>
<li>Obtener filas de otras tablas cuando se hacen <code>JOIN</code> entre ellas</li>
<li>Encontrar máximos y mínimos mediante las funciones <code>MAX()</code> y <code>MIN()</code></li>
<li>Para establecer ordenaciones en los resultados de una consulta</li>
</ul>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="82" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="82" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Creando índices (I)</h1>
<p>Una posibilidad es definir el índice en el mismo momento que se crea la tabla para la cual se define:</p>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> test (
    id <span class="hljs-type">INTEGER</span>,
    col1 <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">10</span>),
    INDEX(col1(<span class="hljs-number">5</span>)) <span class="hljs-comment">-- 5 primeros caracteres</span>
);
</span></span></foreignObject></svg></code></pre>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="83" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="83" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Creando índices (y II)</h1>
<p>Otra opción es definir el índice de manera explícita mediante una consulta DDL:</p>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-keyword">CREATE</span> [<span class="hljs-keyword">UNIQUE</span>] INDEX index_name
    [index_type]
    <span class="hljs-keyword">ON</span> tbl_name (key_part,...)
  key_part: col_name [(length)]
  index_type:
    <span class="hljs-keyword">USING</span> {BTREE <span class="hljs-operator">|</span> HASH}
</span></span></foreignObject></svg></code></pre>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="84" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="84" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Índices automatizados</h1>
<p><strong>InnoDB</strong>, el motor de MySQL, crea automáticamente índices en las siguientes situaciones:</p>
<ul>
<li>Las claves primarias de las tablas tienen asociadas un índice de manera automática, para que buscar valores duplicados sea eficiente</li>
<li>De la misma forma, las claves ajenas también tienen definidas automáticamente un índice para comprobar eficientemente si el valor de la columna referenciada existe</li>
</ul>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="85" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="85" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Árboles B</h1>
<p>Los índices basan su funcionamiento en los árboles B:</p>
<p><img src="img/t5/arbol.png" alt="center" style="height:400px;" /></p>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="86" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-class="section" data-theme="bbdd" class="section" data-marpit-pagination="86" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--class:section;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>GESTIÓN DE USUARIOS</h1>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="87" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="87" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Creación de usuarios (I)</h1>
<p>La creación de un usuario en SQL se refiere al proceso de establecer una cuenta de usuario en un sistema de gestión de bases de datos</p>
<p>La creación de un usuario permite a una persona o una aplicación acceder a la base de datos y realizar diversas operaciones, como consultar datos, insertar registros, actualizar información o eliminar información, dependiendo de los permisos otorgados al usuario</p>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="88" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="88" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Creación de usuarios (y II)</h1>
<p>Para crear un usuario debemos estar conectados a la base de datos con un usuario que disponga de permisos suficientes para llevar a cabo tal acción</p>
<p>La sentencia para crear usuarios es:</p>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">&#x27;username&#x27;</span> IDENTIFIED <span class="hljs-keyword">BY</span> <span class="hljs-string">&#x27;password&#x27;</span>;
</span></span></foreignObject></svg></code></pre>
<p>Donde:</p>
<ul>
<li><code>username</code>: es el nombre que se dará al nuevo usuario (debe ser único).</li>
<li><code>password</code>: es la contraseña que se utilizará para acceder.</li>
</ul>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="89" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="89" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Asignación de permisos</h1>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-keyword">GRANT</span> PRIVILEGE <span class="hljs-keyword">ON</span> schema.tabla <span class="hljs-keyword">TO</span> <span class="hljs-string">&#x27;nombre_de_usuario&#x27;</span> <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">GRANT</span> OPTION;
</span></span></foreignObject></svg></code></pre>
<p>Asigna los permisos que consideremos necesarios a un usuario</p>
<ul>
<li><code>PRIVILEGE</code>: Uno o más de los siguientes valores que permiten ejecución de las sentencias homónimas: <code>CREATE</code>, <code>ALTER</code>, <code>DROP</code>, <code>INSERT</code>, <code>UPDATE</code>, <code>DELETE</code>, <code>SELECT</code>; <code>*</code> para todos los permisos</li>
<li><code>schema.tabla</code>: El <code>schema</code> y la tabla(s) sobre la que aplicar los permisos, siendo <code>*</code> equivalente a <em>todos</em> (e.g. <code>s.*</code> todas tabla de <code>s</code>, <code>*.*</code> toda tabla de todo <code>schema</code>)</li>
<li><code>WITH GRANT OPTION</code> (opcional): , que puede omitirse, otorga al usuario la posibilidad de asignatar permisos iguales o inferiores a los suyos a otros usuarios</li>
</ul>
<p><code>FLUSH PRIVILEGES</code> tras asignar permisos fuerza su refresco en algunos SGBD</p>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="90" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="90" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Asignación de permisos sobre vistas</h1>
<p>Las vistas toman un papel crucial en la privacidad de las bases datos cuando se combinan con una gestión de permisos adecuada</p>
<p>Por ejemplo, ante una vista creada como:</p>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> miBD.miVista <span class="hljs-keyword">AS</span> <span class="hljs-keyword">SELECT</span> ...
</span></span></foreignObject></svg></code></pre>
<p>Es posible establecer un permiso tal que:</p>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">ON</span> miBD.miVista <span class="hljs-keyword">TO</span> <span class="hljs-string">&#x27;nombre_de_usuario&#x27;</span>;
</span></span></foreignObject></svg></code></pre>
<p>De tal forma que <code>nombre_de_usuario</code> solo pueda consultar la información proporcionada por <code>miVista</code> del <code>miBD</code></p>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="91" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="91" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Revocación de permisos</h1>
<p>Al igual que podemos crear permisos, podemos revocarlos. Para ello empleamos:</p>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-keyword">REVOKE</span> PRIVILEGE <span class="hljs-keyword">ON</span> base_de_datos.tabla <span class="hljs-keyword">FROM</span> <span class="hljs-string">&#x27;nombre_de_usuario&#x27;</span>;
</span></span></foreignObject></svg></code></pre>
<p>Que funciona de forma análoga a <code>GRANT</code>.</p>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="92" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="92" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Consultar los permisos de un usuario</h1>
<p>Podemos consultar los permisos de un usuario con:</p>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-keyword">SHOW</span> GRANTS <span class="hljs-keyword">FOR</span> <span class="hljs-string">&#x27;nombre_de_usuario&#x27;</span>;
</span></span></foreignObject></svg></code></pre>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="93" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="93" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Eliminar usuario</h1>
<p>Para eliminar un usuario usaremos la siguiente sentencia:</p>
<pre><code class="language-SQL"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">&#x27;nombre_de_usuario&#x27;</span>;
</span></span></foreignObject></svg></code></pre>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="94" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-theme="bbdd" data-marpit-pagination="94" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Recomendaciones generales</h1>
<p>Es fundamental tener en cuenta la seguridad al crear usuarios en una base de datos. Esto implica asignar permisos mínimos necesarios para evitar el acceso no autorizado y utilizar contraseñas seguras. Además, debes administrar y mantener adecuadamente las cuentas de usuario a lo largo del tiempo, revocando permisos si ya no son necesarios y cambiando contraseñas periódicamente</p>
<p>Ten en cuenta que los detalles exactos y la sintaxis pueden variar según el SGBD que utilices, por lo que es importante consultar la documentación específica de tu sistema de gestión de bases de datos para obtener instrucciones precisas</p>
<footer>Bases de datos</footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="95" data-paginate="true" data-header="Gestión de bases de datos" data-footer="Bases de datos" data-class="license" data-theme="bbdd" class="license" data-marpit-pagination="95" data-marpit-pagination-total="95" style="--paginate:true;--header:Gestión de bases de datos;--footer:Bases de datos;--class:license;--theme:bbdd;">
<header>Gestión de bases de datos</header>
<h1>Licencia</h1>
<p>Esta obra está licenciada bajo una licencia <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Atribución-NoComercial-CompartirIgual 4.0 Internacional</a>.</p>
<p>Puede encontrar su código en el siguiente enlace: <a href="https://github.com/etsisi/Aprendizaje-profundo">https://github.com/etsisi/Aprendizaje-profundo</a></p>
<footer>Bases de datos</footer>
</section>
<script>!function(){"use strict";const t="marpitSVGPolyfill:setZoomFactor,",e=Symbol();let r,o;function n(n){const i="object"==typeof n&&n.target||document,a="object"==typeof n?n.zoom:n;window[e]||(Object.defineProperty(window,e,{configurable:!0,value:!0}),window.addEventListener("message",(({data:e,origin:r})=>{if(r===window.origin)try{if(e&&"string"==typeof e&&e.startsWith(t)){const[,t]=e.split(","),r=Number.parseFloat(t);Number.isNaN(r)||(o=r)}}catch(t){console.error(t)}})));let l=!1;Array.from(i.querySelectorAll("svg[data-marpit-svg]"),(t=>{var e,n,i,s;t.style.transform||(t.style.transform="translateZ(0)");const c=a||o||t.currentScale||1;r!==c&&(r=c,l=c);const d=t.getBoundingClientRect(),{length:u}=t.children;for(let r=0;r<u;r+=1){const o=t.children[r],a=o.getScreenCTM();if(a){const t=null!==(n=null===(e=o.x)||void 0===e?void 0:e.baseVal.value)&&void 0!==n?n:0,r=null!==(s=null===(i=o.y)||void 0===i?void 0:i.baseVal.value)&&void 0!==s?s:0,l=o.firstElementChild,{style:u}=l;u.transformOrigin||(u.transformOrigin=`${-t}px ${-r}px`),u.transform=`scale(${c}) matrix(${a.a}, ${a.b}, ${a.c}, ${a.d}, ${a.e-d.left}, ${a.f-d.top}) translateZ(0.0001px)`}}})),!1!==l&&Array.from(i.querySelectorAll("iframe"),(({contentWindow:e})=>{null==e||e.postMessage(`${t}${l}`,"null"===window.origin?"*":window.origin)}))}r=1,o=void 0;const i=(t,e,r)=>{if(t.getAttribute(e)!==r)return t.setAttribute(e,r),!0};function a({once:t=!1,target:e=document}={}){const r="Apple Computer, Inc."===navigator.vendor?[n]:[];let o=!t;const a=()=>{for(const t of r)t({target:e});!function(t=document){Array.from(t.querySelectorAll('svg[data-marp-fitting="svg"]'),(t=>{var e;const r=t.firstChild,o=r.firstChild,{scrollWidth:n,scrollHeight:a}=o;let l,s=1;if(t.hasAttribute("data-marp-fitting-code")&&(l=null===(e=t.parentElement)||void 0===e?void 0:e.parentElement),t.hasAttribute("data-marp-fitting-math")&&(l=t.parentElement),l){const t=getComputedStyle(l),e=Math.ceil(l.clientWidth-parseFloat(t.paddingLeft||"0")-parseFloat(t.paddingRight||"0"));e&&(s=e)}const c=Math.max(n,s),d=Math.max(a,1),u=`0 0 ${c} ${d}`;i(r,"width",`${c}`),i(r,"height",`${d}`),i(t,"preserveAspectRatio",getComputedStyle(t).getPropertyValue("--preserve-aspect-ratio")||"xMinYMin meet"),i(t,"viewBox",u)&&t.classList.toggle("__reflow__")}))}(e),o&&window.requestAnimationFrame(a)};return a(),()=>{o=!1}}const l=Symbol(),s=document.currentScript;((t=document)=>{if("undefined"==typeof window)throw new Error("Marp Core's browser script is valid only in browser context.");if(t[l])return t[l];const e=a({target:t}),r=()=>{e(),delete t[l]};Object.defineProperty(t,l,{configurable:!0,value:r})})(s?s.getRootNode():document)}();
</script></foreignObject></svg></div><script>/*!! License: https://unpkg.com/@marp-team/marp-cli@1.7.0/lib/bespoke.js.LICENSE.txt */
!function(){"use strict";const e=document.body,t=(...e)=>history.replaceState(...e),n="presenter",r="next",o=["",n,r],a="data-bespoke-marp-",i=(e,{protocol:t,host:n,pathname:r,hash:o}=location)=>{const a=e.toString();return`${t}//${n}${r}${a?"?":""}${a}${o}`},s=()=>e.dataset.bespokeView,l=e=>new URLSearchParams(location.search).get(e),d=(e,n={})=>{var r;const o={location,setter:t,...n},a=new URLSearchParams(o.location.search);for(const t of Object.keys(e)){const n=e[t];"string"==typeof n?a.set(t,n):a.delete(t)}try{o.setter({...null!==(r=window.history.state)&&void 0!==r?r:{}},"",i(a,o.location))}catch(e){console.error(e)}},c=(()=>{const e="bespoke-marp";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}})(),u=e=>{try{return localStorage.getItem(e)}catch(e){return null}},f=(e,t)=>{try{return localStorage.setItem(e,t),!0}catch(e){return!1}},m=e=>{try{return localStorage.removeItem(e),!0}catch(e){return!1}},g=(e,t)=>{const n="aria-hidden";t?e.setAttribute(n,"true"):e.removeAttribute(n)},p=e=>{e.parent.classList.add("bespoke-marp-parent"),e.slides.forEach((e=>e.classList.add("bespoke-marp-slide"))),e.on("activate",(t=>{const n="bespoke-marp-active",r=t.slide,o=r.classList,a=!o.contains(n);if(e.slides.forEach((e=>{e.classList.remove(n),g(e,!0)})),o.add(n),g(r,!1),a){const e=`${n}-ready`;o.add(e),document.body.clientHeight,o.remove(e)}}))},v=e=>{let t=0,n=0;Object.defineProperty(e,"fragments",{enumerable:!0,value:e.slides.map((e=>[null,...e.querySelectorAll("[data-marpit-fragment]")]))});const r=r=>void 0!==e.fragments[t][n+r],o=(r,o)=>{t=r,n=o,e.fragments.forEach(((e,t)=>{e.forEach(((e,n)=>{if(null==e)return;const i=t<r||t===r&&n<=o;e.setAttribute(`${a}fragment`,(i?"":"in")+"active");const s=`${a}current-fragment`;t===r&&n===o?e.setAttribute(s,"current"):e.removeAttribute(s)}))})),e.fragmentIndex=o;const i={slide:e.slides[r],index:r,fragments:e.fragments[r],fragmentIndex:o};e.fire("fragment",i)};e.on("next",(({fragment:a=!0})=>{if(a){if(r(1))return o(t,n+1),!1;const a=t+1;e.fragments[a]&&o(a,0)}else{const r=e.fragments[t].length;if(n+1<r)return o(t,r-1),!1;const a=e.fragments[t+1];a&&o(t+1,a.length-1)}})),e.on("prev",(({fragment:a=!0})=>{if(r(-1)&&a)return o(t,n-1),!1;const i=t-1;e.fragments[i]&&o(i,e.fragments[i].length-1)})),e.on("slide",(({index:t,fragment:n})=>{let r=0;if(void 0!==n){const o=e.fragments[t];if(o){const{length:e}=o;r=-1===n?e-1:Math.min(Math.max(n,0),e-1)}}o(t,r)})),o(0,0)},h=document,y=()=>!(!h.fullscreenEnabled&&!h.webkitFullscreenEnabled),b=()=>!(!h.fullscreenElement&&!h.webkitFullscreenElement),x=e=>{e.fullscreen=()=>{y()&&(async()=>{return b()?null===(e=h.exitFullscreen||h.webkitExitFullscreen)||void 0===e?void 0:e.call(h):((e=h.body)=>{var t;return null===(t=e.requestFullscreen||e.webkitRequestFullscreen)||void 0===t?void 0:t.call(e)})();var e})()},document.addEventListener("keydown",(t=>{"f"!==t.key&&"F11"!==t.key||t.altKey||t.ctrlKey||t.metaKey||!y()||(e.fullscreen(),t.preventDefault())}))},w="bespoke-marp-inactive",k=(e=2e3)=>({parent:t,fire:n})=>{const r=t.classList,o=e=>n(`marp-${e?"":"in"}active`);let a;const i=()=>{a&&clearTimeout(a),a=setTimeout((()=>{r.add(w),o()}),e),r.contains(w)&&(r.remove(w),o(!0))};for(const e of["mousedown","mousemove","touchend"])document.addEventListener(e,i);setTimeout(i,0)},E=["AUDIO","BUTTON","INPUT","SELECT","TEXTAREA","VIDEO"],L=e=>{e.parent.addEventListener("keydown",(e=>{if(!e.target)return;const t=e.target;(E.includes(t.nodeName)||"true"===t.contentEditable)&&e.stopPropagation()}))},$=e=>{window.addEventListener("load",(()=>{for(const t of e.slides){const e=t.querySelector("[data-marp-fitting]")?"":"hideable";t.setAttribute(`${a}load`,e)}}))},S=({interval:e=250}={})=>t=>{document.addEventListener("keydown",(e=>{if(" "===e.key&&e.shiftKey)t.prev();else if("ArrowLeft"===e.key||"ArrowUp"===e.key||"PageUp"===e.key)t.prev({fragment:!e.shiftKey});else if(" "!==e.key||e.shiftKey)if("ArrowRight"===e.key||"ArrowDown"===e.key||"PageDown"===e.key)t.next({fragment:!e.shiftKey});else if("End"===e.key)t.slide(t.slides.length-1,{fragment:-1});else{if("Home"!==e.key)return;t.slide(0)}else t.next();e.preventDefault()}));let n,r,o=0;t.parent.addEventListener("wheel",(a=>{let i=!1;const s=(e,t)=>{e&&(i=i||((e,t)=>((e,t)=>{const n="X"===t?"Width":"Height";return e[`client${n}`]<e[`scroll${n}`]})(e,t)&&((e,t)=>{const{overflow:n}=e,r=e[`overflow${t}`];return"auto"===n||"scroll"===n||"auto"===r||"scroll"===r})(getComputedStyle(e),t))(e,t)),(null==e?void 0:e.parentElement)&&s(e.parentElement,t)};if(0!==a.deltaX&&s(a.target,"X"),0!==a.deltaY&&s(a.target,"Y"),i)return;a.preventDefault();const l=Math.sqrt(a.deltaX**2+a.deltaY**2);if(void 0!==a.wheelDelta){if(void 0===a.webkitForce&&Math.abs(a.wheelDelta)<40)return;if(a.deltaMode===a.DOM_DELTA_PIXEL&&l<4)return}else if(a.deltaMode===a.DOM_DELTA_PIXEL&&l<12)return;r&&clearTimeout(r),r=setTimeout((()=>{n=0}),e);const d=Date.now()-o<e,c=l<=n;if(n=l,d||c)return;let u;(a.deltaX>0||a.deltaY>0)&&(u="next"),(a.deltaX<0||a.deltaY<0)&&(u="prev"),u&&(t[u](),o=Date.now())}))},P=(e=".bespoke-marp-osc")=>{const t=document.querySelector(e);if(!t)return()=>{};const n=(e,n)=>{t.querySelectorAll(`[${a}osc=${JSON.stringify(e)}]`).forEach(n)};return y()||n("fullscreen",(e=>e.style.display="none")),c||n("presenter",(e=>{e.disabled=!0,e.title="Presenter view is disabled due to restricted localStorage."})),e=>{t.addEventListener("click",(t=>{if(t.target instanceof HTMLElement){const{bespokeMarpOsc:n}=t.target.dataset;n&&t.target.blur();const r={fragment:!t.shiftKey};"next"===n?e.next(r):"prev"===n?e.prev(r):"fullscreen"===n?null==e||e.fullscreen():"presenter"===n&&e.openPresenterView()}})),e.parent.appendChild(t),e.on("activate",(({index:t})=>{n("page",(n=>n.textContent=`Page ${t+1} of ${e.slides.length}`))})),e.on("fragment",(({index:t,fragments:r,fragmentIndex:o})=>{n("prev",(e=>e.disabled=0===t&&0===o)),n("next",(n=>n.disabled=t===e.slides.length-1&&o===r.length-1))})),e.on("marp-active",(()=>g(t,!1))),e.on("marp-inactive",(()=>g(t,!0))),y()&&(e=>{for(const t of["","webkit"])h.addEventListener(t+"fullscreenchange",e)})((()=>n("fullscreen",(e=>e.classList.toggle("exit",y()&&b())))))}},T=e=>{window.addEventListener("message",(t=>{if(t.origin!==window.origin)return;const[n,r]=t.data.split(":");if("navigate"===n){const[t,n]=r.split(",");let o=Number.parseInt(t,10),a=Number.parseInt(n,10)+1;a>=e.fragments[o].length&&(o+=1,a=0),e.slide(o,{fragment:a})}}))};var I=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];let N=e=>String(e).replace(/[&<>"']/g,(e=>`&${C[e]};`)),C={"&":"amp","<":"lt",">":"gt",'"':"quot","'":"apos"},A="dangerouslySetInnerHTML",D={className:"class",htmlFor:"for"},M={};function B(e,t){let n=[],r="";t=t||{};for(let e=arguments.length;e-- >2;)n.push(arguments[e]);if("function"==typeof e)return t.children=n.reverse(),e(t);if(e){if(r+="<"+e,t)for(let e in t)!1!==t[e]&&null!=t[e]&&e!==A&&(r+=` ${D[e]?D[e]:N(e)}="${N(t[e])}"`);r+=">"}if(-1===I.indexOf(e)){if(t[A])r+=t[A].__html;else for(;n.length;){let e=n.pop();if(e)if(e.pop)for(let t=e.length;t--;)n.push(e[t]);else r+=!0===M[e]?e:N(e)}r+=e?`</${e}>`:""}return M[r]=!0,r}const K=({children:e})=>B(null,null,...e),O="bespoke-marp-presenter-",q={container:`${O}container`,dragbar:`${O}dragbar-container`,next:`${O}next`,nextContainer:`${O}next-container`,noteContainer:`${O}note-container`,noteWrapper:`${O}note-wrapper`,noteButtons:`${O}note-buttons`,infoContainer:`${O}info-container`,infoPage:`${O}info-page`,infoPageText:`${O}info-page-text`,infoPagePrev:`${O}info-page-prev`,infoPageNext:`${O}info-page-next`,noteButtonsBigger:`${O}note-bigger`,noteButtonsSmaller:`${O}note-smaller`,infoTime:`${O}info-time`,infoTimer:`${O}info-timer`},_=e=>{const{title:t}=document;document.title="[Presenter view]"+(t?` - ${t}`:"");const n={},r=e=>(n[e]=n[e]||document.querySelector(`.${e}`),n[e]);document.body.appendChild((e=>{const t=document.createElement("div");return t.className=q.container,t.appendChild(e),t.insertAdjacentHTML("beforeend",B(K,null,B("div",{class:q.nextContainer},B("iframe",{class:q.next,src:"?view=next"})),B("div",{class:q.dragbar}),B("div",{class:q.noteContainer},B("div",{class:q.noteWrapper}),B("div",{class:q.noteButtons},B("button",{class:q.noteButtonsSmaller,tabindex:"-1",title:"Smaller notes font size"},"Smaller notes font size"),B("button",{class:q.noteButtonsBigger,tabindex:"-1",title:"Bigger notes font size"},"Bigger notes font size"))),B("div",{class:q.infoContainer},B("div",{class:q.infoPage},B("button",{class:q.infoPagePrev,tabindex:"-1",title:"Previous"},"Previous"),B("span",{class:q.infoPageText}),B("button",{class:q.infoPageNext,tabindex:"-1",title:"Next"},"Next")),B("time",{class:q.infoTime,title:"Current time"}),B("time",{class:q.infoTimer,title:"Timer"})))),t})(e.parent)),(e=>{let t=!1;r(q.dragbar).addEventListener("mousedown",(()=>{t=!0,r(q.dragbar).classList.add("active")})),window.addEventListener("mouseup",(()=>{t=!1,r(q.dragbar).classList.remove("active")})),window.addEventListener("mousemove",(e=>{if(!t)return;const n=e.clientX/document.documentElement.clientWidth*100;r(q.container).style.setProperty("--bespoke-marp-presenter-split-ratio",`${Math.max(0,Math.min(100,n))}%`)})),r(q.nextContainer).addEventListener("click",(()=>e.next()));const n=r(q.next),o=(a=n,(e,t)=>{var n;return null===(n=a.contentWindow)||void 0===n?void 0:n.postMessage(`navigate:${e},${t}`,"null"===window.origin?"*":window.origin)});var a;n.addEventListener("load",(()=>{r(q.nextContainer).classList.add("active"),o(e.slide(),e.fragmentIndex),e.on("fragment",(({index:e,fragmentIndex:t})=>o(e,t)))}));const i=document.querySelectorAll(".bespoke-marp-note");i.forEach((e=>{e.addEventListener("keydown",(e=>e.stopPropagation())),r(q.noteWrapper).appendChild(e)})),e.on("activate",(()=>i.forEach((t=>t.classList.toggle("active",t.dataset.index==e.slide())))));let s=0;const l=e=>{s=Math.max(-5,s+e),r(q.noteContainer).style.setProperty("--bespoke-marp-note-font-scale",(1.2**s).toFixed(4))},d=()=>l(1),c=()=>l(-1),u=r(q.noteButtonsBigger),f=r(q.noteButtonsSmaller);u.addEventListener("click",(()=>{u.blur(),d()})),f.addEventListener("click",(()=>{f.blur(),c()})),document.addEventListener("keydown",(e=>{"+"===e.key&&d(),"-"===e.key&&c()}),!0),e.on("activate",(({index:t})=>{r(q.infoPageText).textContent=`${t+1} / ${e.slides.length}`}));const m=r(q.infoPagePrev),g=r(q.infoPageNext);m.addEventListener("click",(t=>{m.blur(),e.prev({fragment:!t.shiftKey})})),g.addEventListener("click",(t=>{g.blur(),e.next({fragment:!t.shiftKey})})),e.on("fragment",(({index:t,fragments:n,fragmentIndex:r})=>{m.disabled=0===t&&0===r,g.disabled=t===e.slides.length-1&&r===n.length-1}));let p=new Date;const v=()=>{const e=new Date,t=e=>`${Math.floor(e)}`.padStart(2,"0"),n=e.getTime()-p.getTime(),o=t(n/1e3%60),a=t(n/1e3/60%60),i=t(n/36e5%24);r(q.infoTime).textContent=e.toLocaleTimeString(),r(q.infoTimer).textContent=`${i}:${a}:${o}`};v(),setInterval(v,250),r(q.infoTimer).addEventListener("click",(()=>{p=new Date}))})(e)},X=e=>{if(!(e=>e.syncKey&&"string"==typeof e.syncKey)(e))throw new Error("The current instance of Bespoke.js is invalid for Marp bespoke presenter plugin.");Object.defineProperties(e,{openPresenterView:{enumerable:!0,value:F},presenterUrl:{enumerable:!0,get:U}}),c&&document.addEventListener("keydown",(t=>{"p"!==t.key||t.altKey||t.ctrlKey||t.metaKey||(t.preventDefault(),e.openPresenterView())}))};function F(){const{max:e,floor:t}=Math,n=e(t(.85*window.innerWidth),640),r=e(t(.85*window.innerHeight),360);return window.open(this.presenterUrl,O+this.syncKey,`width=${n},height=${r},menubar=no,toolbar=no`)}function U(){const e=new URLSearchParams(location.search);return e.set("view","presenter"),e.set("sync",this.syncKey),i(e)}const V=e=>{const t=s();return t===r&&e.appendChild(document.createElement("span")),{"":X,[n]:_,[r]:T}[t]},R=e=>{e.on("activate",(t=>{document.querySelectorAll(".bespoke-progress-parent > .bespoke-progress-bar").forEach((n=>{n.style.flexBasis=100*t.index/(e.slides.length-1)+"%"}))}))},j=e=>{const t=Number.parseInt(e,10);return Number.isNaN(t)?null:t},H=(e={})=>{const t={history:!0,...e};return e=>{let n=!0;const r=e=>{const t=n;try{return n=!0,e()}finally{n=t}},o=(t={fragment:!0})=>{((t,n)=>{const{min:r,max:o}=Math,{fragments:a,slides:i}=e,s=o(0,r(t,i.length-1)),l=o(0,r(n||0,a[s].length-1));s===e.slide()&&l===e.fragmentIndex||e.slide(s,{fragment:l})})((j(location.hash.slice(1))||1)-1,t.fragment?j(l("f")||""):null)};e.on("fragment",(({index:e,fragmentIndex:r})=>{n||d({f:0===r||r.toString()},{location:{...location,hash:`#${e+1}`},setter:(...e)=>t.history?history.pushState(...e):history.replaceState(...e)})})),setTimeout((()=>{o(),window.addEventListener("hashchange",(()=>r((()=>{o({fragment:!1}),d({f:void 0})})))),window.addEventListener("popstate",(()=>{n||r((()=>o()))})),n=!1}),0)}},W=(e={})=>{var n;const r=e.key||(null===(n=window.history.state)||void 0===n?void 0:n.marpBespokeSyncKey)||Math.random().toString(36).slice(2),o=`bespoke-marp-sync-${r}`;var a;a={marpBespokeSyncKey:r},d({},{setter:(e,...n)=>t({...e,...a},...n)});const i=()=>{const e=u(o);return e?JSON.parse(e):Object.create(null)},s=e=>{const t=i(),n={...t,...e(t)};return f(o,JSON.stringify(n)),n},l=()=>{window.removeEventListener("pageshow",l),s((e=>({reference:(e.reference||0)+1})))};return e=>{l(),Object.defineProperty(e,"syncKey",{value:r,enumerable:!0});let t=!0;setTimeout((()=>{e.on("fragment",(e=>{t&&s((()=>({index:e.index,fragmentIndex:e.fragmentIndex})))}))}),0),window.addEventListener("storage",(n=>{if(n.key===o&&n.oldValue&&n.newValue){const r=JSON.parse(n.oldValue),o=JSON.parse(n.newValue);if(r.index!==o.index||r.fragmentIndex!==o.fragmentIndex)try{t=!1,e.slide(o.index,{fragment:o.fragmentIndex})}finally{t=!0}}}));const n=()=>{const{reference:e}=i();void 0===e||e<=1?m(o):s((()=>({reference:e-1})))};window.addEventListener("pagehide",(e=>{e.persisted&&window.addEventListener("pageshow",l),n()})),e.on("destroy",n)}},{PI:Y,abs:J,sqrt:z,atan2:G}=Math,Q={passive:!0},Z=({slope:e=-.7,swipeThreshold:t=30}={})=>n=>{let r;const o=n.parent,a=e=>{const t=o.getBoundingClientRect();return{x:e.pageX-(t.left+t.right)/2,y:e.pageY-(t.top+t.bottom)/2}};o.addEventListener("touchstart",(({touches:e})=>{r=1===e.length?a(e[0]):void 0}),Q),o.addEventListener("touchmove",(e=>{if(r)if(1===e.touches.length){e.preventDefault();const t=a(e.touches[0]),n=t.x-r.x,o=t.y-r.y;r.delta=z(J(n)**2+J(o)**2),r.radian=G(n,o)}else r=void 0})),o.addEventListener("touchend",(o=>{if(r){if(r.delta&&r.delta>=t&&r.radian){const t=(r.radian-e+Y)%(2*Y)-Y;n[t<0?"next":"prev"](),o.stopPropagation()}r=void 0}}),Q)},ee="_tA",te=e=>{const t=document.documentTransition;if(!t)return;let n;e._tP=!1;const r=(n,{back:r,cond:o})=>a=>{var i,s;const l=e.slides[e.slide()].querySelector("section[data-transition]");if(!l)return!0;const d=document.querySelector(".bespoke-marp-osc"),c=d?[d]:void 0;if(e._tP){if(a._tA){e._tP=!1;try{t.start({sharedElements:c}).catch((()=>{}))}catch(e){}return!0}}else{if(!o(a))return!0;const d="transition"+(a.back||r?"Back":""),u=Number.parseInt(null!==(i=l.dataset[`${d}Duration`])&&void 0!==i?i:"",10),f=Number.parseInt(null!==(s=l.dataset[`${d}Delay`])&&void 0!==s?s:"",10),m={};Number.isNaN(u)||(m.duration=u.toString()),Number.isNaN(f)||(m.delay=f.toString()),e._tP=t.prepare({rootTransition:l.dataset[d],rootConfig:m,sharedElements:c}).then((()=>n(a))).catch((()=>n(a)))}return!1};e.on("prev",r((t=>e.prev({...t,[ee]:!0})),{back:!0,cond:e=>{var t;return e.index>0&&!((null===(t=e.fragment)||void 0===t||t)&&n.fragmentIndex>0)}})),e.on("next",r((t=>e.next({...t,[ee]:!0})),{cond:t=>t.index+1<e.slides.length&&!(n.fragmentIndex+1<n.fragments.length)})),setTimeout((()=>{e.on("slide",r((t=>e.slide(t.index,{...t,[ee]:!0})),{cond:t=>{const n=e.slide();return t.index!==n&&(t.back=t.index<n,!0)}}))}),0),e.on("fragment",(e=>{n=e}))};let ne;const re=()=>(void 0===ne&&(ne="wakeLock"in navigator&&navigator.wakeLock),ne),oe=async()=>{const e=re();if(e)try{return await e.request("screen")}catch(e){console.warn(e)}return null},ae=async()=>{if(!re())return;let e;const t=()=>{e&&"visible"===document.visibilityState&&oe()};for(const e of["visibilitychange","fullscreenchange"])document.addEventListener(e,t);return e=await oe(),e};((t=document.getElementById("p"))=>{(()=>{const t=l("view");e.dataset.bespokeView=t===r||t===n?t:""})();const a=(e=>{const t=l(e);return d({[e]:void 0}),t})("sync")||void 0;var i,c,u,f,m,g,h,y,b,w,E,T;i=t,c=((...e)=>{const t=o.findIndex((e=>s()===e));return e.map((([e,n])=>e[t]&&n)).filter((e=>e))})([[1,1,0],W({key:a})],[[1,1,1],V(t)],[[1,1,0],L],[[1,1,1],p],[[1,0,0],k()],[[1,1,1],$],[[1,1,1],H({history:!1})],[[1,1,0],S()],[[1,1,0],x],[[1,0,0],R],[[1,1,0],Z()],[[1,0,0],P()],[[1,0,0],te],[[1,1,1],v],[[1,1,0],ae]),f=1===(i.parent||i).nodeType?i.parent||i:document.querySelector(i.parent||i),m=[].filter.call("string"==typeof i.slides?f.querySelectorAll(i.slides):i.slides||f.children,(function(e){return"SCRIPT"!==e.nodeName})),g={},h=function(e,t){return(t=t||{}).index=m.indexOf(e),t.slide=e,t},w=function(e,t){m[e]&&(u&&b("deactivate",h(u,t)),u=m[e],b("activate",h(u,t)))},E=function(e,t){var n=m.indexOf(u)+e;b(e>0?"next":"prev",h(u,t))&&w(n,t)},T={off:y=function(e,t){g[e]=(g[e]||[]).filter((function(e){return e!==t}))},on:function(e,t){return(g[e]||(g[e]=[])).push(t),y.bind(null,e,t)},fire:b=function(e,t){return(g[e]||[]).reduce((function(e,n){return e&&!1!==n(t)}),!0)},slide:function(e,t){if(!arguments.length)return m.indexOf(u);b("slide",h(m[e],t))&&w(e,t)},next:E.bind(null,1),prev:E.bind(null,-1),parent:f,slides:m,destroy:function(e){b("destroy",h(u,e)),g={}}},(c||[]).forEach((function(e){e(T)})),u||w(0)})()}();</script></body></html>